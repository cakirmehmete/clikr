(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){e.exports=a.p+"static/media/clikrlogo2.f8a6c63b.png"},149:function(e,t,a){e.exports=a.p+"static/media/clikrlogo.6c47d62c.png"},265:function(e,t,a){e.exports=a.p+"static/media/background.d8b36ae3.jpeg"},5472:function(e,t,a){e.exports=a(5809)},5690:function(e,t){},5806:function(e,t,a){},5809:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(41),i=a.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,l=a(5),c=a(6),u=a(8),d=a(7),p=a(9),h=a(5815),m=a(5816),f=a(5812),b=a(20),g=a(4),y=a(11),v=a(262),E=a.n(v),w=a(263),S=a.n(w),_=a(46),O=a.n(_),C=a(54),j=a.n(C),k=a(257),I=a.n(k),q=a(5811),x=a(145),Q=a.n(x),L=a(1),N=a.n(L),D=a(50),T=a.n(D),A=a(144),P=a.n(A),V=a(10),M=a.n(V),F=a(33),W=a.n(F),R=a(82),B=a.n(R),U=a(83),z=a.n(U),Y=a(55),H=a.n(Y),G=a(21),$=a.n(G),Z=Object(g.b)("profStore")(o=Object(g.c)(o=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:null,selectedCourse:0,selectedLecture:0},a.styles=e.classes,a.profStore=e.profStore,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(void 0!==this.props.location.pathname&&""!==this.props.location.pathname.length){var e=this.props.location.pathname.split("/");"questions"===e[3]&&this.setState({selectedLecture:e[2],open:this.profStore.getLectureWithId(e[2]).course_id,selectedCourse:this.profStore.getLectureWithId(e[2]).course_id}),"lectures"===e[3]&&this.setState({selectedLecture:0,selectedCourse:e[2]})}}},{key:"componentDidUpdate",value:function(){if(void 0!==this.props.location.pathname&&""!==this.props.location.pathname.length){var e=this.props.location.pathname.split("/");"questions"===e[3]&&this.state.selectedLecture!==e[2]&&this.setState({selectedLecture:e[2],open:this.profStore.getLectureWithId(e[2]).course_id,selectedCourse:this.profStore.getLectureWithId(e[2]).course_id}),"lectures"===e[3]&&this.state.selectedCourse!==e[2]&&this.setState({selectedLecture:0,selectedCourse:e[2]}),2===e.length&&(0===this.state.selectedLecture&&0===this.state.selectedCourse||this.setState({selectedLecture:0,selectedCourse:0}))}}},{key:"handleCourseClick",value:function(e){this.props.history.push("/professor/"+e+"/lectures")}},{key:"handleLectureClick",value:function(e){this.props.history.push("/professor/"+e+"/questions")}},{key:"handleExpand",value:function(e){var t=this.state.open;t=t===e?null:e,this.setState({open:t})}},{key:"render",value:function(){var e=this,t=this.profStore.courses.filter(function(e){return e.is_current});return s.a.createElement(N.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},s.a.createElement(I.a,{className:this.styles.drawer,variant:"permanent",classes:{paper:this.styles.drawerPaper},anchor:"left"},s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"center"},s.a.createElement("img",{src:P.a,alt:"logo",height:80}))),s.a.createElement(N.a,{item:!0},s.a.createElement(Q.a,null)),s.a.createElement(N.a,{item:!0},s.a.createElement(O.a,null,t.map(function(t,a){var n=e.profStore.getCourseLectures(t.id);return s.a.createElement("div",{key:"div"+a},s.a.createElement(T.a,{className:e.styles.hover,button:!0,key:a,onClick:function(){return e.handleCourseClick(t.id)},selected:e.state.selectedCourse===t.id},s.a.createElement(j.a,{disableTypography:!0,primary:s.a.createElement(M.a,{type:"body2",className:e.styles.listtext},t.title),secondary:s.a.createElement(M.a,{type:"body2",className:e.styles.listsubtext},t.term," ",t.year)}),s.a.createElement(H.a,null,s.a.createElement($.a,{color:"primary",disabled:0===n.length,onClick:function(){return e.handleExpand(t.id)}},n.length>0&&e.state.open===t.id?s.a.createElement(B.a,null):s.a.createElement(z.a,null)))),s.a.createElement(W.a,{in:e.state.open===t.id,timeout:"auto",unmountOnExit:!0},s.a.createElement(O.a,{component:"div",disablePadding:!0},n.map(function(a,n){return s.a.createElement(T.a,{button:!0,key:t.id+"_lecture_"+n,onClick:function(){return e.handleLectureClick(a.id)},selected:e.state.selectedLecture===a.id},s.a.createElement(j.a,{disableTypography:!0,primary:s.a.createElement(M.a,{type:"body2",className:e.styles.nestedListtext}," ",a.title," ")}))}))))})))))}}]),t}(s.a.Component))||o)||o,J=Object(q.a)(Object(y.withStyles)(function(e){return{drawer:{width:240,flexShrink:0},listtext:{color:e.palette.primary.main},listsubtext:{color:e.palette.primary.dark},titletext:{color:e.palette.primary.main,paddingTop:2*e.spacing.unit},nestedListtext:{color:e.palette.primary.main,paddingLeft:2*e.spacing.unit},drawerPaper:{width:240,backgroundColor:e.palette.secondary.main},hover:{"&:hover":{backgroundColor:e.palette.secondary.dark}},toolbar:e.mixins.toolbar}})(Z)),K=a(104),X=a.n(K),ee=a(85),te=a.n(ee),ae=a(49),ne=a.n(ae),se=a(5814),re=a(259),ie=a.n(re),oe=a(48),le=a.n(oe),ce=a(60),ue=a.n(ce),de=a(88),pe=a(26),he=a.n(pe),me="https://clikr.herokuapp.com/",fe=me+"api/v1/";function be(){return he.a.get(fe+"student/courses")}function ge(e){return he.a.post(fe+"student/courses",{enroll_code:e})}function ye(e,t){return he.a.post(fe+"student/questions/"+t,{answer:e})}he.a.defaults.withCredentials=!0;var ve,Ee,we=function(){function e(t){Object(l.a)(this,e),this.professorStore=t}return Object(c.a)(e,[{key:"getName",value:function(){var e=Object(de.a)(ue.a.mark(function e(){var t=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he.a.get(fe+"professor/name").then(function(e){return e.data.name}).catch(function(e){return console.log(e),t._checkAuth(e),[]}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"archiveCourse",value:function(e){var t=this;return function(e){return he.a.post(fe+"professor/courses/"+e+"/archive")}(e).then(function(e){return t.professorStore.updateCourseData(e.data.id,e.data.course),e.data.message}).catch(function(e){return console.log(e),t._checkAuth(e),[]})}},{key:"duplicateCourse",value:function(e,t,a){var n=this;return function(e,t,a){return he.a.post(fe+"professor/courses/"+e+"/duplicate",{year:t,term:a})}(e,t,a).then(function(e){return e.data}).catch(function(e){return console.log(e),n._checkAuth(e),[]})}},{key:"exportGradesLecture",value:function(e){var t=this;return function(e){return he.a.get(fe+"professor/lectures/"+e+"/exportgrades")}(e).then(function(e){return e.data}).catch(function(e){return console.log(e),t._checkAuth(e),[]})}},{key:"exportGradesCourse",value:function(e){var t=this;return function(e){return he.a.get(fe+"professor/courses/"+e+"/exportgrades")}(e).then(function(e){return e.data}).catch(function(e){return console.log(e),t._checkAuth(e),[]})}},{key:"loadData",value:function(){var e=this;return this.professorStore.dataLoaded?new Promise(function(){return!0}):he.a.get(fe+"professor/data").then(function(t){e.professorStore.updateData(t.data)}).catch(function(t){console.log(t),e._checkAuth(t)})}},{key:"loadAllCourses",value:function(){var e=this;return he.a.get(fe+"professor/courses").then(function(t){e.professorStore.updateAllCourseData(t.data)}).catch(function(t){console.log(t),e._checkAuth(t)})}},{key:"loadAnswers",value:function(e){var t=this;return function(e){return he.a.get(fe+"professor/questions/"+e+"/statistics")}(e).then(function(e){return e.data}).catch(function(e){return console.log(e),t._checkAuth(e),[]})}},{key:"loadQuestions",value:function(e){var t=this;return function(e){return he.a.get(fe+"professor/lectures/"+e+"/questions")}(e).then(function(e){return e.data}).catch(function(e){return console.log(e),t._checkAuth(e),[]})}},{key:"openQuestion",value:function(e,t){var a=this;(function(e){return he.a.post(fe+"professor/questions/"+e,{action:"open"})})(e).then(function(n){a.professorStore.openQuestion(e,t)}).catch(function(e){console.log(e),a._checkAuth(e)})}},{key:"closeQuestion",value:function(e,t){var a=this;(function(e){return he.a.post(fe+"professor/questions/"+e,{action:"close"})})(e).then(function(n){a.professorStore.closeQuestion(e,t)}).catch(function(e){console.log(e),a._checkAuth(e)})}},{key:"closeAllQuestions",value:function(e){var t=this;(function(e){return he.a.post(fe+"professor/lectures/"+e,{action:"close"})})(e).then(function(a){t.professorStore.closeAllQuestionsForLecture(e)}).catch(function(e){console.log(e),t._checkAuth(e)})}},{key:"addLecture",value:function(e){var t=this;(function(e){return he.a.post(fe+"professor/courses/"+e.course_id+"/lectures",{title:e.title,date:e.date,description:e.description,open_date:e.openDate,close_date:e.closeDate,scheduled:e.scheduled})})(e).then(function(e){var a=e.data.lectures.find(function(t){return t.id===e.data.id});a.questions=[],t.professorStore.addLecture(a)}).catch(function(e){console.log(e),t._checkAuth(e)})}},{key:"addCourse",value:function(e){var t=this;(function(e){return he.a.post(fe+"professor/courses",{title:e.title,dept:e.dept,coursenum:e.num,description:e.description,year:e.year,term:e.term})})(e).then(function(a){e.id=a.data.id;var n=a.data.courses.find(function(e){return e.id===a.data.id});n.lectures=[],t.professorStore.addCourse(a.data.courses,n)}).catch(function(e){console.log(e),t._checkAuth(e)})}},{key:"deleteCourses",value:function(e){var t=this;e.map(function(e){return(a=e,he.a.delete(fe+"professor/courses/"+a)).then(function(){t.professorStore.removeCourse(e),t.professorStore.dataLoaded=!1,t.loadData()}).catch(function(e){console.log(e),t._checkAuth(e)});var a})}},{key:"changeCourseTitle",value:function(e,t){var a,n,s=this;(a=e,n=t,he.a.patch(fe+"professor/courses/"+a,{title:n})).then(function(a){s.professorStore.updateCourse(e,t)}).catch(function(e){console.log(e),s._checkAuth(e)})}},{key:"changeCourseData",value:function(e,t){var a=this;(function(e,t){return he.a.patch(fe+"professor/courses/"+e,{title:t.title,dept:t.dept,coursenum:t.coursenum,year:t.year,term:t.term,description:t.description})})(e,t).then(function(n){a.professorStore.updateCourseData(e,t)}).catch(function(e){console.log(e),a._checkAuth(e)})}},{key:"editLecture",value:function(e){var t,a=this;return(t=e,he.a.patch(fe+"professor/lectures/"+t.id,{title:t.title,date:t.date,description:t.description,open_date:t.openDate,close_date:t.closeDate,scheduled:t.scheduled})).then(function(e){a.professorStore.updateLecture(e.data.lecture)}).catch(function(e){console.log(e),a._checkAuth(e)})}},{key:"editQuestion",value:function(e){var t,a=this;(t=e,he.a.patch(fe+"professor/questions/"+t.id,{id:t.id,lecture_id:t.lecture_id,question_type:t.question_type,question_title:t.question_title,question_image:t.question_image,correct_answer:t.correct_answer,option1:t.option1,option2:t.option2,option3:t.option3,option4:t.option4,option5:t.option5,number_of_options:t.number_of_options,word_limit:t.word_limit,lower_label:t.lower_label,upper_label:t.upper_label})).then(function(t){a.professorStore.updateQuestion(e)}).catch(function(e){console.log(e),a._checkAuth(e)})}},{key:"deleteLectures",value:function(e,t){var a=this;e.map(function(e){return(n=e,he.a.delete(fe+"professor/lectures/"+n)).then(function(){a.professorStore.removeLecture(e,t)}).catch(function(e){console.log(e),a._checkAuth(e)});var n})}},{key:"deleteQuestions",value:function(e,t){var a=this;e.map(function(e){return(n=e,he.a.delete(fe+"professor/questions/"+n)).then(function(){a.professorStore.removeQuestion(e,t)}).catch(function(e){console.log(e),a._checkAuth(e)});var n})}},{key:"addQuestion",value:function(e){var t=this;(function(e){return he.a.post(fe+"professor/lectures/"+e.lecture_id+"/questions",{lecture_id:e.lecture_id,question_type:e.question_type,question_title:e.question_title,question_image:e.question_image,correct_answer:e.correct_answer,creator_id:e.creator_id,option1:e.option1,option2:e.option2,option3:e.option3,option4:e.option4,option5:e.option5,number_of_options:e.number_of_options,word_limit:e.word_limit,lower_label:e.lower_label,upper_label:e.upper_label})})(e).then(function(e){var a=e.data.questions.find(function(t){return t.id===e.data.id});a.id=e.data.id,t.professorStore.addQuestion(a)}).catch(function(e){console.log(e),t._checkAuth(e)})}},{key:"getLogoutProf",value:function(){var e=Object(de.a)(ue.a.mark(function e(){var t=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:he.a.get(fe+"professor/logout").catch(function(e){console.log(e),t._checkAuth(e)});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"_checkAuth",value:function(e){void 0!==e.response&&401===e.response.status&&window.location.replace("/login-prof")}}]),e}(),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={anchorEl:null,goHome:!1,logout:!1,userName:""},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null,logout:!1})},a.handleLogout=function(){a.setState({anchorEl:null,logout:!0})},a.handleHome=function(){a.props.history.push("/professor")},a.styles=e.classes,a.store=e.store,a.apiProfService=new we(a.store),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.apiProfService.getName().then(function(t){e.setState({userName:t})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,a=Boolean(t);return this.state.logout?(this.apiProfService.getLogoutProf(),s.a.createElement(se.a,{to:"/",push:!0})):s.a.createElement(X.a,{position:"sticky",color:"inherit",className:this.styles.appBar},s.a.createElement(te.a,null,s.a.createElement($.a,{className:e.homeButton,onClick:this.handleHome,color:"primary"},s.a.createElement(ne.a,null,s.a.createElement("path",{fill:"secondary",d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}))),s.a.createElement(te.a,{style:{float:"none",marginRight:"auto"}}),s.a.createElement(M.a,{variant:"h8",color:"secondary",align:"center"}," ",this.state.userName," "),s.a.createElement($.a,{"aria-haspopup":"true",onClick:this.handleMenu,color:"primary",float:"right"},s.a.createElement(ne.a,{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},s.a.createElement("path",{color:"secondary",d:"M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"}))),s.a.createElement(ie.a,{id:"simple-menu",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:this.handleClose},s.a.createElement(le.a,{onClick:this.handleLogout},"LOGOUT"))))}}]),t}(s.a.Component),_e=Object(q.a)(Object(y.withStyles)(function(e){return{appBar:Object(b.a)({},e.breakpoints.up("sm"),{marginLeft:240,width:"calc(100% - ".concat(240,"px)")}),homeButton:{marginLeft:"0%"}}})(Se)),Oe=a(77),Ce=a(25),je=(a(221),a(19)),ke=function e(t,a,n,s,r,i,o,c){Object(l.a)(this,e),this.course_id=s,this.date=a,this.id=n,this.title=t,this.scheduled=i,this.openDate=o,this.closeDate=c};function Ie(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return qe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qe(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw r}}}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var xe,Qe=(ve=function(){function e(){Object(l.a)(this,e),Object(Oe.a)(this,"courses",Ee,this),this.dataLoaded=!1}return Object(c.a)(e,[{key:"getCourseWithId",value:function(e){return this.courses.find(function(t){return t.id===e})}},{key:"getLectureById",value:function(e){if(0===e)return{questions:[]};var t=this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e})});return void 0===t?new ke:t.lectures.find(function(t){return t.id===e})}},{key:"getLectureWithId",value:function(e){if(0===e)return{questions:[]};var t=this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e})});return void 0===t?{questions:[]}:t.lectures.find(function(t){return t.id===e})}},{key:"getCourseLectures",value:function(e){return this.courses.find(function(t){return t.id===e}).lectures}},{key:"getQuestionWithId",value:function(e,t){return e.questions===[]||void 0===e.questions?new ke:void 0===e.questions.find(function(e){return e.id===t})?new ke:this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e.id})}).lectures.find(function(t){return t.id===e.id}).questions.find(function(e){return e.id===t})}},{key:"getLectureQuestions",value:function(e){return this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e})}).lectures}},{key:"updateData",value:function(e){this.dataLoaded=!0,this.courses=e}},{key:"addCourse",value:function(e,t){t.enroll_code=e.find(function(e){return e.id===t.id}).enroll_code,this.courses.push(t),this.courses.slice().sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0})}},{key:"updateCourse",value:function(e,t){this.courses.find(function(t){return t.id===e}).title=t}},{key:"updateCourseData",value:function(e,t){var a=this.courses.find(function(t){return t.id===e});a.title=t.title,a.dept=t.dept,a.coursenum=t.coursenum,a.year=t.year,a.term=t.term,a.description=t.description,a.is_current=t.is_current}},{key:"updateLecture",value:function(e){var t=this.getLectureById(e.id);t.title=e.title,t.closeDate=e.closeDate,t.openDate=e.openDate,t.scheduled=e.scheduled,t.date=e.date,console.log(t)}},{key:"deleteCourse",value:function(e){this.courses.remove(this.courses.find(function(t){return t.id===e}))}},{key:"addLecture",value:function(e){this.courses.find(function(t){return t.id===e.course_id}).lectures.push(e),this.courses.find(function(t){return t.id===e.course_id}).lectures.slice().sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0})}},{key:"removeCourse",value:function(e){this.courses.remove(this.courses.find(function(t){return t.id===e}))}},{key:"removeLecture",value:function(e,t){var a=this.courses.find(function(e){return e.id===t}).lectures;a.remove(a.find(function(t){return t.id===e}))}},{key:"removeQuestion",value:function(e,t){var a=this.courses.find(function(e){return e.lectures.find(function(e){return e.id===t})}).lectures.find(function(e){return e.id===t}).questions;a.remove(a.find(function(t){return t.id===e}))}},{key:"addQuestion",value:function(e){this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e.lecture_id})}).lectures.find(function(t){return t.id===e.lecture_id}).questions.push(e),this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e.lecture_id})}).lectures.find(function(t){return t.id===e.lecture_id}).questions.slice().sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0})}},{key:"updateQuestion",value:function(e){for(var t=this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e.lecture_id})}).lectures.find(function(t){return t.id===e.lecture_id}).questions.find(function(t){return t.id===e.id}),a=0,n=Object.keys(e);a<n.length;a++){var s=n[a];t[s]=e[s]}}},{key:"openQuestion",value:function(e,t){this.courses.find(function(e){return e.lectures.find(function(e){return e.id===t})}).lectures.find(function(e){return e.id===t}).questions.find(function(t){return t.id===e}).is_open=!0,this.courses.find(function(e){return e.lectures.find(function(e){return e.id===t})}).lectures.find(function(e){return e.id===t}).questions.find(function(t){return t.id===e}).opened_at=Date.now()}},{key:"closeQuestion",value:function(e,t){this.courses.find(function(e){return e.lectures.find(function(e){return e.id===t})}).lectures.find(function(e){return e.id===t}).questions.find(function(t){return t.id===e}).is_open=!1}},{key:"closeAllQuestionsForLecture",value:function(e){var t,a=Ie(this.courses.find(function(t){return t.lectures.find(function(t){return t.id===e})}).lectures.find(function(t){return t.id===e}).questions);try{for(a.s();!(t=a.n()).done;){t.value.is_open=!1}}catch(n){a.e(n)}finally{a.f()}}},{key:"courses",set:function(e){e.sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0}),this._courses=e}}]),e}(),Ee=Object(Ce.a)(ve.prototype,"courses",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(Ce.a)(ve.prototype,"getCourseLectures",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"getCourseLectures"),ve.prototype),Object(Ce.a)(ve.prototype,"getLectureQuestions",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"getLectureQuestions"),ve.prototype),Object(Ce.a)(ve.prototype,"updateData",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"updateData"),ve.prototype),Object(Ce.a)(ve.prototype,"addCourse",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"addCourse"),ve.prototype),Object(Ce.a)(ve.prototype,"updateCourse",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"updateCourse"),ve.prototype),Object(Ce.a)(ve.prototype,"updateCourseData",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"updateCourseData"),ve.prototype),Object(Ce.a)(ve.prototype,"updateLecture",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"updateLecture"),ve.prototype),Object(Ce.a)(ve.prototype,"deleteCourse",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"deleteCourse"),ve.prototype),Object(Ce.a)(ve.prototype,"addLecture",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"addLecture"),ve.prototype),Object(Ce.a)(ve.prototype,"removeCourse",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"removeCourse"),ve.prototype),Object(Ce.a)(ve.prototype,"removeLecture",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"removeLecture"),ve.prototype),Object(Ce.a)(ve.prototype,"removeQuestion",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"removeQuestion"),ve.prototype),Object(Ce.a)(ve.prototype,"addQuestion",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"addQuestion"),ve.prototype),Object(Ce.a)(ve.prototype,"updateQuestion",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"updateQuestion"),ve.prototype),Object(Ce.a)(ve.prototype,"openQuestion",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"openQuestion"),ve.prototype),Object(Ce.a)(ve.prototype,"closeQuestion",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"closeQuestion"),ve.prototype),Object(Ce.a)(ve.prototype,"closeAllQuestionsForLecture",[je.d],Object.getOwnPropertyDescriptor(ve.prototype,"closeAllQuestionsForLecture"),ve.prototype),ve),Le=a(12),Ne=a.n(Le),De=a(43),Te=a.n(De),Ae=a(56),Pe=a.n(Ae),Ve=a(84),Me=a.n(Ve),Fe=a(95),We=a.n(Fe),Re=a(45),Be=a.n(Re),Ue=a(34),ze=a.n(Ue),Ye=a(69),He=a.n(Ye),Ge=a(39),$e=a.n(Ge),Ze=a(64),Je=a.n(Ze),Ke=a(139),Xe=a.n(Ke);var et,tt=Object(g.c)(xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,code:""},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.setState({open:!1})},a.joinCode=e.joinCode,a.profStore=e.profStore,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({code:this.joinCode})}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.joinCode&&this.setState({code:e.joinCode})}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Add Students",placement:"top"},s.a.createElement($.a,{color:"primary",onClick:this.handleOpen},s.a.createElement(Xe.a,null))),s.a.createElement(Je.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},s.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.paper},s.a.createElement(M.a,{variant:"subtitle1"},"Share this code with your students:"),s.a.createElement(M.a,{variant:"h5",gutterBottom:!0},this.state.code),s.a.createElement(Ne.a,{variant:"outlined",color:"primary",onClick:this.handleSubmit},"Done"))))}}]),t}(s.a.Component))||xe,at=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200}}})(tt),nt=a(140),st=a.n(nt),rt=a(17),it=a.n(rt);var ot,lt,ct,ut,dt,pt,ht,mt,ft,bt,gt,yt,vt,Et,wt,St=Object(g.c)(et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,newYear:"",newTerm:""},a.handleOpen=function(){a.setState({open:!0})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(b.a)({},n,s))},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.apiProfService.duplicateCourse(a.courseId,a.state.newYear,a.state.newTerm).then(function(e){a.setState({open:!1})})},a.profStore=e.profStore,a.apiProfService=e.apiProfService,a.courseId=e.courseId,a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.courseId&&(this.courseId=e.courseId)}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Duplicate Course",placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleOpen},s.a.createElement(st.a,null))),s.a.createElement(Je.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},s.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.paper},s.a.createElement(M.a,{variant:"subtitle1"},"Duplicate Course"),s.a.createElement("form",{className:this.styles.container,onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},s.a.createElement(it.a,{label:"Year",name:"newYear",className:this.styles.textField,value:this.state.newYear,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Term",name:"newTerm",className:this.styles.textField,value:this.state.newTerm,onChange:this.handleChange,margin:"normal"}),s.a.createElement(Ne.a,{className:this.styles.button,type:"submit",disabled:!(this.state.newTerm&&this.state.newYear),variant:"outlined",color:"primary"}," submit")))))}}]),t}(s.a.Component))||et,_t=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:20*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:2*e.spacing.unit,direction:"column"},container:{display:"flex",flexWrap:"wrap",flexDirection:"column"},textField:{width:15*e.spacing.unit},button:{width:15*e.spacing.unit},dense:{marginTop:19},menu:{width:200}}})(St),Ot=a(142),Ct=a.n(Ot),jt=a(141),kt=a.n(jt),It=Object(g.c)(ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={editMode:!1,courseTitle:a.courseTitle,newTitle:"",nav:!1,courseId:a.courseId,courseYear:a.courseYear,courseTerm:a.courseTerm,courseCode:a.courseCode,toHome:!1},a.handleEdit=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(b.a)({},n,s))},a.handleEditOpen=function(){a.setState({editMode:!0})},a.handleEditClose=function(){a.state.newTitle.replace(/\s/g,"").length>0?(a.apiProfService.changeCourseTitle(a.state.courseId,a.state.newTitle),a.setState({courseTitle:a.state.newTitle,editMode:!1})):a.setState({editMode:!1})},a.handleToCourse=function(){a.setState({nav:!0})},a.handleArchive=function(){a.apiProfService.archiveCourse(a.state.courseId).then(function(e){a.setState({toHome:!0})})},a.handleExportGrades=function(){a.apiProfService.exportGradesCourse(a.courseId).then(function(e){var t=document.createElement("a"),a=new Blob([e.fileData],{type:"text/csv;charset=utf-8;"});t.href=URL.createObjectURL(a),t.download=e.fileName,document.body.appendChild(t),t.click()})},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a.courseId=e.courseId,a.courseTitle=e.courseTitle,a.courseYear=e.courseYear,a.courseTerm=e.courseTerm,a.courseCode=e.courseCode,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({courseTitle:this.courseTitle,newTitle:this.courseTitle,courseId:this.courseId,courseYear:this.courseYear,courseTerm:this.courseTerm,courseCode:this.courseCode})}},{key:"componentWillReceiveProps",value:function(e){this.state.editMode||e.courseId!==this.courseId&&this.setState({courseTitle:e.courseTitle,newTitle:e.courseTitle,courseId:e.courseId,courseYear:e.courseYear,courseTerm:e.courseTerm,courseCode:e.courseCode})}},{key:"render",value:function(){var e=this;return this.state.nav?s.a.createElement(se.a,{to:"/professor/"+this.state.courseId+"/lectures",push:!0}):this.state.toHome?s.a.createElement(se.a,{to:"/professor",push:!0}):this.state.editMode?s.a.createElement(T.a,{divider:!0},s.a.createElement($e.a,null,s.a.createElement(He.a,{id:"bootstrap-input",name:"newTitle",value:this.state.newTitle,onChange:function(t){return e.handleEdit(t)},classes:{input:this.styles.bootstrapInput}})),s.a.createElement(H.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Done Editing",placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleEditClose},s.a.createElement(Be.a,{className:this.styles.iconDone})))),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Export Grades",placement:"top"},s.a.createElement($.a,{color:"secondary",href:fe+"professor/courses/"+this.courseId+"/exportgrades",target:"_blank"},s.a.createElement(We.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(at,{profStore:this.profStore,joinCode:this.state.courseCode}))))):s.a.createElement(T.a,{button:!0,divider:!0,onClick:this.handleToCourse},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start"},s.a.createElement(N.a,{item:!0},s.a.createElement(j.a,{primary:this.state.courseTitle,secondary:this.state.courseTerm+" "+this.state.courseYear}))),s.a.createElement(H.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Change Title",placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleEditOpen},s.a.createElement(Me.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(_t,{profStore:this.profStore,apiProfService:this.apiProfService,courseId:this.state.courseId})),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:this.props.archive?"Unarchive Course":"Archive Course",placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleArchive},this.props.archive?s.a.createElement(kt.a,null):s.a.createElement(Ct.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Export Grades",placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleExportGrades},s.a.createElement(We.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(at,{profStore:this.profStore,joinCode:this.state.courseCode})))))}}]),t}(s.a.Component))||ot,qt=Object(y.withStyles)(function(e){return{iconDone:{color:e.palette.primary.light},iconEdit:{color:e.palette.secondary},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:14,padding:"10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}})(It),xt=Object(g.c)(lt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={referrerCourseId:null},a.handleCourseClick=function(e){return function(){a.setState(function(){return{referrerCourseId:e}})}},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.profStore.courses.filter(function(e){return e.is_current});if(null!==this.state.referrerCourseId)return s.a.createElement(se.a,{to:"/professor/"+this.state.referrerCourseId+"/lectures",push:!0});var a=t.map(function(t,a){return s.a.createElement(qt,{key:a,archive:!1,profStore:e.profStore,apiProfService:e.apiProfService,courseId:t.id,courseTitle:t.title,courseYear:t.year,courseTerm:t.term,courseCode:t.enroll_code})});return s.a.createElement(O.a,{component:"nav"},a)}}]),t}(s.a.Component))||lt,Qt=Object(y.withStyles)(function(e){return{card:{minWidth:275}}})(xt),Lt=a(52),Nt=a.n(Lt),Dt=a(96),Tt=a.n(Dt),At=a(47),Pt=a.n(At),Vt=Object(g.c)(ct=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={referrerLectureId:null,delCourses:[]},a.handleChange=function(e){return function(t){a.state.delCourses.find(function(t){return t.id===e}).checked=t.target.checked,a.setState({delCourses:a.state.delCourses}),a.props.getDeletions(a.state.delCourses)}},a.styles=e.classes,a.profStore=e.profStore,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[];this.profStore.courses.filter(function(t){return t.is_current!==e.props.archive}).forEach(function(e){t.push({id:e.id,checked:!1,title:e.title,term:e.term,year:e.year})}),this.setState({delCourses:t})}},{key:"render",value:function(){var e=this;return s.a.createElement($e.a,{component:"fieldset",fullWidth:!0},s.a.createElement(Tt.a,{name:"delCourses",value:this.state.delCourses,onChange:this.handleChange},s.a.createElement(O.a,{component:"nav"},this.state.delCourses.map(function(t,a){return s.a.createElement(T.a,{divider:!0,key:a},s.a.createElement(j.a,{primary:t.title,secondary:t.term+" "+t.year}),s.a.createElement(H.a,null,s.a.createElement(Pt.a,{key:a,control:s.a.createElement(Nt.a,{className:e.styles.checkBox,key:t.id,checked:t.checked,onChange:e.handleChange(t.id),value:t.id})})))}))))}}]),t}(s.a.Component))||ct,Mt=Object(y.withStyles)(function(e){return{checkBox:{color:e.palette.primary.dark}}})(Vt),Ft=a(66),Wt=a.n(Ft),Rt=a(59),Bt=a.n(Rt),Ut=a(35),zt=a.n(Ut),Yt=a(37),Ht=a.n(Yt),Gt=a(36),$t=a.n(Gt),Zt=a(51),Jt=a.n(Zt),Kt=a(38),Xt=a.n(Kt),ea=Object(g.c)(ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toNewCourse:!1,deleteMode:!1,deletions:[],delTitles:[],delIds:[],open:!1},a.getDeletions=function(e){a.setState({deletions:e})},a.handleNewCourseClick=function(){a.setState(function(){return{toNewCourse:!0}})},a.handleDelete=function(){if(a.state.deleteMode){for(var e=[],t=[],n=0;n<a.state.deletions.length;n++)a.state.deletions[n].checked&&(e.push(a.state.deletions[n].id),t.push(a.state.deletions[n].title));e.length>0?a.setState({delTitles:t,delIds:e,open:!0}):a.handleClose()}else a.setState({deleteMode:!0})},a.handleClose=function(){a.setState({deleteMode:!1,open:!1,delIds:[],delTitles:[],deletions:[]})},a.handleFinalDeletion=function(){a.apiProfService.deleteCourses(a.state.delIds),a.handleClose()},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!0===this.state.toNewCourse)return s.a.createElement(se.a,{to:"/professor/new",push:!0});var e=s.a.createElement(Qt,{profStore:this.profStore,apiProfService:this.apiProfService}),t="Delete";return this.state.deleteMode&&(e=s.a.createElement(Mt,{profStore:this.profStore,getDeletions:this.getDeletions,archive:!1}),t="Done"),s.a.createElement("div",null,s.a.createElement(Te.a,{className:this.props.classes.card},s.a.createElement(Pe.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{className:this.styles.title,variant:"h6",color:"inherit"}," Courses ")),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:t,placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleDelete.bind(this)},"Delete"===t?s.a.createElement(Bt.a,null):s.a.createElement(Be.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(Ne.a,{onClick:this.handleNewCourseClick,color:"primary"},s.a.createElement(Wt.a,{className:this.styles.icon,color:"primary"},"add_circle"),"Add Course"))))),e)),s.a.createElement(zt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the following course(s): "),s.a.createElement($t.a,null,this.state.delTitles.map(function(e,t){return s.a.createElement(Jt.a,{key:t,id:"alert-dialog-description"},e)})),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleFinalDeletion,color:"secondary"},"yes"))))}}]),t}(s.a.Component))||ut,ta=Object(y.withStyles)(function(e){return{card:{minWidth:275},icon:{margin:e.spacing.unit},title:{margin:e.spacing.unit}}})(ea),aa=a(71),na=Object(g.c)(dt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={referrerCourseId:null},a.handleCourseClick=function(e){return function(){a.setState(function(){return{referrerCourseId:e}})}},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.profStore.courses.filter(function(e){return!e.is_current});return null!==this.state.referrerCourseId?s.a.createElement(se.a,{to:"/professor/"+this.state.referrerCourseId+"/lectures",push:!0}):s.a.createElement(O.a,{component:"nav"},t.map(function(t,a){return s.a.createElement(qt,{key:a,archive:!0,profStore:e.profStore,apiProfService:e.apiProfService,courseId:t.id,courseTitle:t.title,courseYear:t.year,courseTerm:t.term,joinCode:t.enroll_code})}))}}]),t}(s.a.Component))||dt,sa=Object(y.withStyles)(function(e){return{card:{minWidth:275}}})(na),ra=Object(g.c)(pt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toNewCourse:!1,deleteMode:!1,deletions:[],delTitles:[],delIds:[],open:!1,showArchive:!1},a.getDeletions=function(e){a.setState({deletions:e})},a.handleDelete=function(){if(a.state.deleteMode){for(var e=[],t=[],n=0;n<a.state.deletions.length;n++)a.state.deletions[n].checked&&(e.push(a.state.deletions[n].id),t.push(a.state.deletions[n].title));e.length>0?a.setState({delTitles:t,delIds:e,open:!0}):a.handleClose()}else a.setState({deleteMode:!0})},a.handleClose=function(){a.setState({deleteMode:!1,open:!1,delIds:[],delTitles:[],deletions:[]})},a.handleFinalDeletion=function(){a.apiProfService.deleteCourses(a.state.delIds),a.handleClose()},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleToggleArchive",value:function(){this.setState(function(e){return Object(aa.a)({},e,{showArchive:!e.showArchive})})}},{key:"render",value:function(){if(!0===this.state.toNewCourse)return s.a.createElement(se.a,{to:"/professor/new",push:!0});var e=s.a.createElement(sa,{profStore:this.profStore,apiProfService:this.apiProfService}),t="Delete";this.state.deleteMode&&(e=s.a.createElement(Mt,{profStore:this.profStore,getDeletions:this.getDeletions,archive:!0}),t="Done");var a=this.state.showArchive?"Archived Courses":"Show Archived Courses",n="";return this.state.showArchive&&(n="Delete"===t?s.a.createElement(Bt.a,null):s.a.createElement(Be.a,null)),s.a.createElement("div",{className:this.props.classes.containerDiv},s.a.createElement(Te.a,{className:this.props.classes.card},s.a.createElement(Pe.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{className:this.styles.title,variant:"h6",color:"inherit"}," ",a," ")),s.a.createElement(N.a,{item:!0},s.a.createElement($.a,{color:"primary",onClick:this.handleToggleArchive.bind(this)},this.state.showArchive?s.a.createElement(B.a,null):s.a.createElement(z.a,null))))),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:t,placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleDelete.bind(this)},n)))))),s.a.createElement(W.a,{in:this.state.showArchive,timeout:"auto",unmountOnExit:!0},e),s.a.createElement(zt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the following course(s): "),s.a.createElement($t.a,null,this.state.delTitles.map(function(e,t){return s.a.createElement(Jt.a,{key:t,id:"alert-dialog-description"},e)})),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleFinalDeletion,color:"secondary"},"yes"))))))}}]),t}(s.a.Component))||pt,ia=Object(y.withStyles)(function(e){return{card:{minWidth:275},icon:{margin:e.spacing.unit},title:{margin:e.spacing.unit},containerDiv:{paddingTop:8*e.spacing.unit}}})(ra),oa=Object(g.b)("profStore")(ht=Object(g.c)(ht=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.profStore=e.profStore,a.apiProfService=new we(a.profStore),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(ta,{profStore:this.profStore,apiProfService:this.apiProfService}),s.a.createElement(ia,{profStore:this.profStore,apiProfService:this.apiProfService}))}}]),t}(s.a.Component))||ht)||ht,la=Object(y.withStyles)(function(e){return{}})(oa),ca=a(18),ua=function e(t){Object(l.a)(this,e),void 0!==t&&(this.title=t.title,this.id=t.id,this.num=t.num,this.dept=t.dept,this.description=t.description,this.term=t.term,this.joinCode=t.joinCode,this.year=t.year,this.is_current=t.is_current)},da=Object(g.b)("profStore")(mt=Object(g.c)(mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.profStore=e.profStore,a.apiProfService=new we(a.profStore),a.state={toHome:!1,title:"",dept:"",num:"",year:"",term:"",description:""},a.handleChange=a.handleChange.bind(Object(ca.a)(Object(ca.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(ca.a)(Object(ca.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.apiProfService.addCourse(new ua(this.state)),this.setState({toHome:!0})}},{key:"render",value:function(){return!0===this.state.toHome?s.a.createElement(se.a,{to:"/professor",push:!0}):s.a.createElement("div",{className:this.styles.paper},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Add New Course:"),s.a.createElement("form",{className:this.styles.container,onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},s.a.createElement(it.a,{label:"Course Name",name:"title",className:this.styles.textField,value:this.state.title,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Department",name:"dept",className:this.styles.textField,value:this.state.dept,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Course Number",name:"num",className:this.styles.textField,value:this.state.num,onChange:this.handleChange,margin:"none"}),s.a.createElement(it.a,{label:"Year",name:"year",className:this.styles.textField,value:this.state.year,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Term",name:"term",className:this.styles.textField,value:this.state.term,onChange:this.handleChange,margin:"none"}),s.a.createElement(it.a,{label:"Description",name:"description",className:this.styles.textField,value:this.state.description,onChange:this.handleChange,margin:"normal",multiline:!0}),s.a.createElement(Ne.a,{type:"submit",disabled:!this.state.title,variant:"outlined",color:"primary"}," submit")))}}]),t}(s.a.Component))||mt)||mt,pa=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},subcontainer:{display:"flex",direction:"row",alignItems:"flex-start"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400}}})(da),ha=a(111),ma=a(63),fa=a(109),ba=Object(g.b)("profStore")(ft=Object(g.b)("apiService")(ft=Object(g.c)(ft=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).modifyDate=function(e){return e.setUTCDate(e.getDate()),e.setUTCHours(12),e.setUTCMinutes(0),e.setUTCMinutes(0),e},a.handleDateChange=function(e){e=a.modifyDate(e),a.setState({selectedDate:e})},a.handleOpenDateChange=function(e){e=a.modifyDate(e),a.setState({openDate:e},function(){a.handleValidation()})},a.handleCloseDateChange=function(e){e=a.modifyDate(e),a.setState({closeDate:e},function(){a.handleValidation()})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(b.a)({},n,s),function(){a.handleValidation()})},a.handleCheck=function(e){var t=e.target,n=t.name,s=t.checked;a.setState(Object(b.a)({},n,s),function(){a.handleValidation()})},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.props.apiService.editLecture(new ke(a.state.title,a.state.selectedDate,a.state.id,a.state.courseId,null,a.state.scheduled,a.state.openDate,a.state.closeDate)).then(function(){a.handleClose()})},fa.a.prototype.getStartOfMonth=fa.a.prototype.startOfMonth,a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiService;var n=new Date;return a.state={open:!1,title:"",courseId:"",id:"",scheduled:!1,titleValid:!0,formValid:!1,selectedDate:n,dateValid:!0,openDate:n,closeDate:n},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;void 0!==e.lectureObj&&(this.setState({title:e.lectureObj.title,scheduled:e.lectureObj.scheduled,selectedDate:new Date(e.lectureObj.date),courseId:e.lectureObj.courseId,id:e.lectureObj.id},function(){t.handleValidation()}),e.lectureObj.scheduled&&this.setState({openDate:new Date(e.lectureObj.open_date),closeDate:new Date(e.lectureObj.close_date)},function(){t.handleValidation()}))}},{key:"handleValidation",value:function(){var e=this.state.dateValid,t=""!==this.state.title;e=!this.state.scheduled||this.state.closeDate.getTime()>=this.state.openDate.getTime(),this.setState({titleValid:t,dateValid:e},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.titleValid&&this.state.dateValid})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ne.a,{variant:"outlined",onClick:this.handleOpen},s.a.createElement(M.a,{variant:"h7",color:"textPrimary"},"Edit")),s.a.createElement(zt.a,{fullWidth:!0,scroll:"paper",open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Edit Lecture Information"),s.a.createElement($t.a,null,s.a.createElement(N.a,{container:!0,direction:"column"},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(it.a,{requiredtitle:"true",error:!this.state.titleValid,name:"title",label:"Lecture Title",className:this.styles.textField,value:this.state.title,onChange:this.handleChange,margin:"normal",multiline:!0})),s.a.createElement(ma.b,{utils:ha.a},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(ma.a,{margin:"normal",label:"Lecture Date",name:"selectedDate",value:this.state.selectedDate,onChange:this.handleDateChange.bind,className:this.styles.dateField}))),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(N.a,{container:!0,direction:"row",alignItems:"center"},s.a.createElement(N.a,{item:!0},s.a.createElement(Nt.a,{checked:this.state.scheduled,onChange:this.handleCheck,name:"scheduled"})),s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{variant:"body2",color:"textPrimary"},"Schedule the Lecture to Open and Close at Specific Dates")))),s.a.createElement(W.a,{in:this.state.scheduled,timeout:"auto",unmountOnExit:!0},s.a.createElement(ma.b,{utils:ha.a},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(ma.a,{margin:"normal",label:"Start Date",name:"openDate",value:this.state.openDate,onChange:this.handleOpenDateChange,className:this.styles.dateField,error:!this.state.dateValid})),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(ma.a,{margin:"normal",label:"End Date",name:"closeDate",value:this.state.closeDate,onChange:this.handleCloseDateChange,className:this.styles.dateField,error:!this.state.dateValid}))))))),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,type:"button",autoFocus:!0,color:"secondary"},"Cancel"),s.a.createElement(Ne.a,{onClick:this.handleSubmit,type:"submit",color:"secondary",disabled:!this.state.formValid},"Submit"))))}}]),t}(s.a.Component))||ft)||ft)||ft,ga=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:80*e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},gridItem:{margin:e.spacing.unit},dateField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:30*e.spacing.unit},gridItemButton:{margin:2*e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:60*e.spacing.unit}}})(ba),ya=Object(g.c)(bt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={editMode:!1,lecture:new ke(null,new Date),newTitle:"",nav:!1},a.handleEdit=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(b.a)({},n,s))},a.handleEditOpen=function(){a.setState({editMode:!0})},a.handleEditClose=function(){a.state.newTitle.replace(/\s/g,"").length>0?(a.apiProfService.changeLectureTitle(a.state.lecture.id,a.state.newTitle),a.setState({editMode:!1})):a.setState({editMode:!1})},a.handleToLecture=function(){a.setState({nav:!0})},a.handleExportGrades=function(){a.apiProfService.exportGradesLecture(a.state.lecture.id).then(function(e){var t=document.createElement("a"),a=new Blob([e.fileData],{type:"text/csv;charset=utf-8;"});t.href=URL.createObjectURL(a),t.download=e.fileName,document.body.appendChild(t),t.click()})},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a.lecture=e.lecture,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.lecture&&this.setState({lecture:this.lecture,newTitle:this.lecture.title})}},{key:"componentWillReceiveProps",value:function(e){this.state.editMode||void 0!==e.lecture&&e.lecture.id!==this.state.lecture.id&&this.setState({lecture:e.lecture,newTitle:e.lecture.title})}},{key:"render",value:function(){return this.state.nav?s.a.createElement(se.a,{to:"/professor/"+this.state.lecture.id+"/questions",push:!0}):s.a.createElement("div",null,s.a.createElement(T.a,{button:!0,divider:!0,onClick:this.handleToLecture},s.a.createElement(j.a,{primary:this.state.lecture.title,secondary:""+this.state.lecture.date}),s.a.createElement(H.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Edit Lecture",placement:"top"},s.a.createElement(ga,{lectureObj:this.state.lecture}))),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Export Grades",placement:"top"},s.a.createElement($.a,{color:"secondary",onClick:this.handleExportGrades},s.a.createElement(We.a,null))))))))}}]),t}(s.a.Component))||bt,va=Object(y.withStyles)(function(e){return{iconDone:{color:e.palette.primary.light},iconEdit:{color:e.palette.secondary},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:14,padding:"10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}})(ya),Ea=Object(g.c)(gt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={lectures:[]},a.styles=e.classes,a.profStore=e.profStore,a.courseId=e.courseId,a.apiProfService=e.apiProfService,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){void 0!==this.courseId&&this.setState({lectures:this.profStore.getCourseLectures(this.courseId)})}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.courseId&&this.setState({lectures:this.profStore.getCourseLectures(e.courseId)})}},{key:"render",value:function(){var e=this;return s.a.createElement(O.a,{component:"nav"},this.state.lectures.map(function(t,a){return s.a.createElement(va,{key:a,profStore:e.profStore,apiProfService:e.apiProfService,lecture:t})}))}}]),t}(s.a.Component))||gt,wa=Object(y.withStyles)(function(e){return{icon:{color:e.palette.primary.light}}})(Ea),Sa=a(32),_a=a.n(Sa),Oa=Object(g.c)(yt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={parentCourse:new ke,editMode:!1},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(function(e){var t=Object(aa.a)({},e.parentCourse);return t[n]=s,{parentCourse:t,editMode:e.editMode}})},a.handleEditOpen=function(){a.setState({editMode:!0})},a.handleEditClose=function(){a.apiProfService.changeCourseData(a.state.parentCourse.id,a.state.parentCourse),a.setState({editMode:!1})},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a.courseId=e.courseId,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;void 0!==this.courseId&&(this.profStore.dataLoaded?this.setState({parentCourse:this.profStore.getCourseWithId(this.courseId)}):this.apiProfService.loadData().then(function(){e.profStore.dataLoaded=!0,e.setState({parentCourse:e.profStore.getCourseWithId(e.courseId)})}))}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.courseId&&this.setState({parentCourse:this.profStore.getCourseWithId(e.courseId)})}},{key:"render",value:function(){return this.state.editMode?s.a.createElement(_a.a,{className:this.styles.editRoot,elevation:1},s.a.createElement(N.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0,xs:12},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0,xs:11},s.a.createElement(it.a,{label:"Course Name",name:"title",className:this.styles.textFieldShort,value:this.state.parentCourse.title,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Department",name:"dept",className:this.styles.textFieldShort,value:this.state.parentCourse.dept,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Course Number",name:"coursenum",className:this.styles.textFieldShort,value:this.state.parentCourse.coursenum,onChange:this.handleChange,margin:"normal"})),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Done Editing",placement:"top"},s.a.createElement($.a,{color:"secondary",disabled:!this.state.parentCourse.title,onClick:this.handleEditClose},s.a.createElement(Be.a,{className:this.styles.iconDone}))))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0,xs:12},s.a.createElement(it.a,{label:"Term",name:"term",className:this.styles.textFieldShort,value:this.state.parentCourse.term,onChange:this.handleChange,margin:"normal"}),s.a.createElement(it.a,{label:"Year",name:"year",className:this.styles.textFieldShort,value:this.state.parentCourse.year,onChange:this.handleChange,margin:"normal"}))),s.a.createElement(it.a,{label:"Description",name:"description",className:this.styles.textFieldLong,value:this.state.parentCourse.description,onChange:this.handleChange,multiline:!0,margin:"normal"})))):s.a.createElement(_a.a,{className:this.styles.root,elevation:1},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0,xs:12},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{className:this.styles.title,variant:"h4",color:"inherit"},this.state.parentCourse.dept," ",this.state.parentCourse.coursenum," - ",this.state.parentCourse.title)),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"Edit Course Info",placement:"top"},s.a.createElement($.a,{color:"primary",onClick:this.handleEditOpen},s.a.createElement(Me.a,null))))),s.a.createElement(M.a,{className:this.styles.termYear,variant:"h8"},this.state.parentCourse.term," ",this.state.parentCourse.year),s.a.createElement(Q.a,{className:this.styles.divider}),s.a.createElement(M.a,{className:this.styles.title,variant:"body2",color:"inherit"},this.state.parentCourse.description))))}}]),t}(s.a.Component))||yt,Ca=Object(y.withStyles)(function(e){return{root:Object(aa.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:7*e.spacing.unit,backgroundColor:e.palette.secondary.main}),editRoot:Object(aa.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:7*e.spacing.unit,backgroundColor:e.palette.primary.main}),card:{minWidth:275},icon:{margin:e.spacing.unit},title:{margin:e.spacing.unit,color:"#FFFFFF"},termYear:{margin:e.spacing.unit,color:"#FFFFFF",fontStyle:"italic"},textFieldShort:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:350},textFieldLong:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:1e3},divider:{backgroundColor:"#FFFFFF"}}})(Oa),ja=Object(g.c)(vt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={referrerLectureId:null,delLectures:[],lectures:[]},a.handleChange=function(e){return function(t){a.state.delLectures.find(function(t){return t.id===e}).checked=t.target.checked,a.setState({delLectures:a.state.delLectures}),a.props.getDeletions(a.state.delLectures)}},a.styles=e.classes,a.profStore=e.profStore,a.courseId=e.courseId,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.profStore.getCourseLectures(this.courseId).map(function(t){return e.push({id:t.id,checked:!1,title:t.title})}),void 0!==this.courseId&&this.setState({lectures:this.profStore.getCourseLectures(this.courseId),delLectures:e})}},{key:"render",value:function(){var e=this;return s.a.createElement($e.a,{component:"fieldset",fullWidth:!0},s.a.createElement(Tt.a,{name:"delLectures",value:this.state.delLectures,onChange:this.handleChange},s.a.createElement(O.a,{component:"nav"},this.state.delLectures.map(function(t,a){return s.a.createElement(T.a,{divider:!0,key:a},s.a.createElement(j.a,{primary:t.title}),s.a.createElement(H.a,null,s.a.createElement(Pt.a,{key:a,control:s.a.createElement(Nt.a,{className:e.styles.checkBox,key:t.id,checked:t.checked,onChange:e.handleChange(t.id),value:t.id})})))}))))}}]),t}(s.a.Component))||vt,ka=Object(y.withStyles)(function(e){return{checkBox:{color:e.palette.primary.dark}}})(ja),Ia=Object(g.c)(Et=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toNewLecture:!1,referrerLectureIndex:-1,parentCourse:new ua,numLects:void 0,deletions:[],deleteMode:!1,delTitles:[],delIds:[],open:!1},a.getDeletions=function(e){a.setState({deletions:e})},a.handleNewLectureClick=function(){a.setState(function(){return{toNewLecture:!0,numLects:a.profStore.getCourseLectures(a.state.parentCourse.id).length+1}})},a.handleLectureClick=function(e){a.setState(function(){return{referrerLectureIndex:e}})},a.handleDelete=function(){if(a.state.deleteMode){for(var e=[],t=[],n=0;n<a.state.deletions.length;n++)a.state.deletions[n].checked&&(e.push(a.state.deletions[n].id),t.push(a.state.deletions[n].title));e.length>0?a.setState({delTitles:t,delIds:e,open:!0}):a.handleClose()}else a.setState({deleteMode:!0})},a.handleClose=function(){a.setState({deleteMode:!1,open:!1,delIds:[],delTitles:[],deletions:[]})},a.handleFinalDeletion=function(){a.apiProfService.deleteLectures(a.state.delIds,a.state.parentCourse.id),a.handleClose()},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a.courseId=e.courseId,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.profStore.dataLoaded?this.setState({parentCourse:this.profStore.getCourseWithId(this.courseId)}):this.apiProfService.loadData().then(function(){e.profStore.dataLoaded=!0,e.setState({parentCourse:e.profStore.getCourseWithId(e.courseId)})})}},{key:"componentDidUpdate",value:function(){var e=this;this.state.parentCourse.id!==this.props.courseId&&(this.props.profStore.dataLoaded?this.setState({parentCourse:this.profStore.getCourseWithId(this.props.courseId)}):this.apiProfService.loadData().then(function(){e.props.profStore.dataLoaded=!0,e.setState({parentCourse:e.profStore.getCourseWithId(e.props.courseId)})}))}},{key:"render",value:function(){if(!0===this.state.toNewLecture)return s.a.createElement(se.a,{to:{pathname:"/professor/"+this.state.parentCourse.id+"/new",state:{numLects:this.state.numLects}}});if(-1!==this.state.referrerLectureIndex)return s.a.createElement(se.a,{to:"/professor/"+this.state.referrerLectureIndex+"/questions",push:!0});var e=s.a.createElement(wa,{courseId:this.state.parentCourse.id,profStore:this.profStore,apiProfService:this.apiProfService}),t=s.a.createElement(Ca,{courseId:this.state.parentCourse.id,profStore:this.profStore,apiProfService:this.apiProfService}),a="delete";return this.state.deleteMode&&(e=s.a.createElement(ka,{courseId:this.state.parentCourse.id,profStore:this.profStore,getDeletions:this.getDeletions}),a="done"),s.a.createElement("div",null,s.a.createElement(Te.a,{className:this.props.classes.card},s.a.createElement(Pe.a,null,t,s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{className:this.styles.title,variant:"h6",color:"inherit"},"List of Lectures")),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:a,placement:"top-start"},s.a.createElement($.a,{color:"secondary",onClick:this.handleDelete.bind(this)},"delete"===a?s.a.createElement(Bt.a,null):s.a.createElement(Be.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(Ne.a,{onClick:this.handleNewLectureClick,color:"primary"},s.a.createElement(Wt.a,{className:this.styles.icon,color:"primary"},"add_circle"),"Add Lecture"))))),e)),s.a.createElement(zt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the following lecture(s): "),s.a.createElement($t.a,null,this.state.delTitles.map(function(e,t){return s.a.createElement(Jt.a,{key:t,id:"alert-dialog-description"},e)})),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleFinalDeletion,color:"secondary"},"yes"))))}}]),t}(s.a.Component))||Et,qa=Object(y.withStyles)(function(e){return{card:{minWidth:275},icon:{margin:e.spacing.unit},title:{margin:e.spacing.unit}}})(Ia),xa=Object(g.b)("profStore")(wt=Object(g.c)(wt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.profStore=e.profStore,a.apiProfService=new we(a.profStore),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(qa,{profStore:this.profStore,apiProfService:this.apiProfService,courseId:this.props.match.params.courseId})}}]),t}(s.a.Component))||wt)||wt,Qa=Object(y.withStyles)(function(e){return{}})(xa),La=a(62),Na=a.n(La),Da=a(181);var Ta,Aa,Pa,Va,Ma,Fa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,toNewMCQuestion:!1,toNewFreeTextQuestion:!1,toNewSliderQuestion:!1,lectureId:null},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleMC=function(){a.setState({open:!1,toNewMCQuestion:!0})},a.handleFreeText=function(){a.setState({open:!1,toNewFreeTextQuestion:!0})},a.handleSlider=function(){a.setState({open:!1,toNewSliderQuestion:!0})},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return!0===this.state.toNewMCQuestion?s.a.createElement(se.a,{to:"/professor/"+this.props.lectureId+"/questions/new-mc",push:!0}):!0===this.state.toNewFreeTextQuestion?s.a.createElement(se.a,{to:"/professor/"+this.props.lectureId+"/questions/new-free-text",push:!0}):!0===this.state.toNewSliderQuestion?s.a.createElement(se.a,{to:"/professor/"+this.props.lectureId+"/questions/new-slider",push:!0}):s.a.createElement("div",null,s.a.createElement(Ne.a,{onClick:this.handleOpen,color:"primary"},s.a.createElement(Wt.a,{className:this.styles.icon,color:"primary"},"add_circle"),"Add Question"),s.a.createElement(Je.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},s.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.paper},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},s.a.createElement(N.a,{item:!0},s.a.createElement($.a,{className:e.button,"aria-label":"multiple choice",onClick:this.handleMC},s.a.createElement("div",{className:e.vert},s.a.createElement(Da.b,{color:"primary",fontSize:"large"}),s.a.createElement(M.a,null,"Multiple Choice")))),s.a.createElement(N.a,{item:!0},s.a.createElement($.a,{className:e.button,"aria-label":"free text",onClick:this.handleFreeText},s.a.createElement("div",{className:e.vert},s.a.createElement(Da.a,{color:"primary",fontSize:"large"}),s.a.createElement(M.a,null,"Free Text")))),s.a.createElement(N.a,{item:!0},s.a.createElement($.a,{className:e.button,"aria-label":"slider",onClick:this.handleSlider},s.a.createElement("div",{className:e.vert},s.a.createElement(Wt.a,{color:"primary",fontSize:"large"},"linear_scale"),s.a.createElement(M.a,null,"Slider"))))))))}}]),t}(s.a.Component),Wa=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200},dense:{marginTop:19},menu:{width:200},vert:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},icon:{margin:e.spacing.unit}}})(Fa),Ra=Na()(me),Ba=Object(g.b)("apiService")(Ta=Object(g.b)("profStore")(Ta=Object(g.c)(Ta=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isOpen:!1,questionId:""},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({isOpen:this.props.open,questionId:this.props.questionId})}},{key:"componentWillReceiveProps",value:function(e){e.parentLecture.id!==this.props.parentLecture.id?this.setState({isOpen:e.open,questionId:e.questionId}):(void 0!==e.recentlyOpenedId&&(e.recentlyOpenedId!==this.state.questionId||this.state.isOpen||(this.props.handleToUpdate(!0),this.setState({isOpen:!0}))),void 0!==e.recentlyClosedId&&e.recentlyClosedId===this.state.questionId&&this.state.isOpen&&(this.props.handleToUpdate(!1),this.setState({isOpen:!1})))}},{key:"handleBtnClick",value:function(){this.state.isOpen?(console.log("closing question in button"),this.props.apiService.closeQuestion(this.props.questionId,this.props.parentLecture.id),this.props.handleToUpdate(!1),this.props.handleListClose(this.props.questionId),this.setState({isOpen:!1})):(console.log("openeint the quesiton in button"),this.props.apiService.openQuestion(this.props.questionId,this.props.parentLecture.id),Ra.emit("subscribe professor",this.props.questionId),this.props.handleClick(this.props.questionId),this.props.handleToUpdate(!0),this.setState({isOpen:!0}))}},{key:"render",value:function(){var e=this;return s.a.createElement(W.a,{in:!this.props.parentLecture.scheduled},s.a.createElement(Ne.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleBtnClick()},className:this.styles.startLectureBtn},this.state.isOpen?"Close":"Open"))}}]),t}(s.a.Component))||Ta)||Ta)||Ta,Ua=Object(y.withStyles)(function(e){return{startLectureBtn:{float:"right"}}})(Ba),za=a(143),Ya=a.n(za),Ha=a(89),Ga=a(70),$a=a.n(Ga),Za=a(137),Ja=Object(g.c)(Aa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.state={time:0,isOn:!1,questionTitle:"",hidden:e.hidden},a.startTimer=a.startTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.stopTimer=a.stopTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.resetTimer=a.resetTimer.bind(Object(ca.a)(Object(ca.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({hidden:this.props.hidden})}},{key:"startTimer",value:function(){var e=this;this.setState({isOn:!0}),this.timer=setInterval(function(){return e.setState({time:Date.now()-new Date(e.props.question.opened_at)})},1)}},{key:"stopTimer",value:function(){this.setState({isOn:!1}),clearInterval(this.timer)}},{key:"resetTimer",value:function(){this.setState({isOn:!1})}},{key:"componentDidUpdate",value:function(){this.props.timer&&(this.props.hidden||this.state.isOn?this.props.hidden&&0!==this.state.time&&this.state.isOn&&(this.stopTimer(),this.resetTimer()):this.startTimer()),this.props.questionTitle!==this.state.questionTitle&&this.setState({questionTitle:this.props.questionTitle}),this.props.hidden!==this.state.hidden&&this.setState({hidden:this.props.hidden})}},{key:"componentWillUnmount",value:function(){this.stopTimer(),this.resetTimer(),this.setState({hidden:!0})}},{key:"render",value:function(){return s.a.createElement(Te.a,{className:this.styles.card,hidden:this.state.hidden},s.a.createElement(Pe.a,null,s.a.createElement(M.a,{variant:"h6",color:"inherit"},"Statistics for ",this.props.questionTitle),this.props.timer?s.a.createElement(M.a,{variant:"subtitle2",color:"inherit",hidden:!this.props.timer},s.a.createElement($a.a,{className:this.styles.icon})," Open for ",this.state.time<1e3?"0s":Za(this.state.time,{secDecimalDigits:0})):null,this.props.children,s.a.createElement(M.a,{variant:"body1",color:"inherit"},"Total Responses: ",this.props.responsesNumber)))}}]),t}(s.a.Component))||Aa,Ka=Object(y.withStyles)(function(e){return{card:{marginBottom:10},icon:{fontSize:12}}})(Ja),Xa=Na()(me),en=Object(g.b)("profStore")(Pa=Object(g.b)("apiService")(Pa=Object(g.c)(Pa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.state={question:{id:0},data:{},responsesNumber:0,update:!1,override:!0},Ha.defaults.global.legend.display=!1,Ha.defaults.global.tooltips.enabled=!1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.setState({override:this.props.override}),this.state.question.id!==this.props.selectedQuestionId&&0!==this.props.selectedQuestionId){var t=this.props.profStore.getQuestionWithId(this.props.parentLecture,this.props.selectedQuestionId);Xa.emit("subscribe professor",t.id);for(var a=[],n=0;n<t.number_of_options;n++){var s=t["option"+(n+1)];s.length>10&&(s="Option "+(n+1)),a.push(s)}this.setState({question:t,data:{labels:a}})}this.state.question.id!==this.props.selectedQuestionId&&0===this.props.selectedQuestionId&&this.setState({question:{id:0,data:{labels:[]}}}),this.props.override?this.props.apiService.loadAnswers(this.props.selectedQuestionId).then(function(t){if(t.question_id===e.props.selectedQuestionId){for(var a=[],n=e.props.profStore.getQuestionWithId(e.props.parentLecture,e.props.selectedQuestionId),s=1;s<=n.number_of_options;s++)a[s-1]=t.answers[s],void 0===t.answers[s]&&(a[s-1]=0);e.setState({data:{datasets:[{label:"Question Statistics",backgroundColor:"#E9C46A",borderColor:"#E9C46A",data:a}]},responsesNumber:t.count,question:n})}}):Xa.on("new results",function(t){if(t.question_id===e.props.selectedQuestionId){for(var a=[],n=e.props.profStore.getQuestionWithId(e.props.parentLecture,e.props.selectedQuestionId),s=1;s<=n.number_of_options;s++)a[s-1]=t.answers[s],void 0===t.answers[s]&&(a[s-1]=0);e.setState({data:{datasets:[{label:"Question Statistics",backgroundColor:"#E9C46A",borderColor:"#E9C46A",data:a}]},responsesNumber:t.count,question:n})}})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.profStore.getQuestionWithId(e.parentLecture,e.selectedQuestionId);if(this.setState({question:a,override:e.override}),this.state.question.id!==e.selectedQuestionId&&0!==e.selectedQuestionId){Xa.emit("subscribe professor",a.id);for(var n=[],s=0;s<a.number_of_options;s++){var r=a["option"+(s+1)];r.length>10&&(r="Option "+(s+1)),n.push(r)}this.setState({data:{labels:n}})}this.state.question.id!==e.selectedQuestionId&&0===e.selectedQuestionId&&this.setState({question:{id:0,data:{labels:[]}}}),e.override?e.apiService.loadAnswers(e.selectedQuestionId).then(function(n){if(n.question_id===e.selectedQuestionId){for(var s=[],r=1;r<=a.number_of_options;r++)s[r-1]=n.answers[r],void 0===n.answers[r]&&(s[r-1]=0);for(var i=[],o=0;o<a.number_of_options;o++){var l=a["option"+(o+1)];l.length>10&&(l="Option "+(o+1)),i.push(l)}t.setState({data:{datasets:[{label:"Question Statistics",backgroundColor:"#E9C46A",borderColor:"#E9C46A",data:s}],labels:i},responsesNumber:n.count})}}):Xa.on("new results",function(n){if(n.question_id===e.selectedQuestionId){for(var s=[],r=1;r<=a.number_of_options;r++)s[r-1]=n.answers[r],void 0===n.answers[r]&&(s[r-1]=0);for(var i=[],o=0;o<a.number_of_options;o++){var l=a["option"+(o+1)];l.length>10&&(l="Option "+(o+1)),i.push(l)}t.setState({data:{datasets:[{label:"Question Statistics",backgroundColor:"#E9C46A",borderColor:"#E9C46A",data:s}],labels:i},responsesNumber:n.count})}})}},{key:"componentWillUnmount",value:function(){this.state.override||Xa.removeAllListeners("new results")}},{key:"render",value:function(){var e={scales:{yAxes:[{ticks:{beginAtZero:!0,userCallback:function(e,t,a){if(Math.floor(e)===e)return e}}}]}};return s.a.createElement(Ka,{question:this.state.question,responsesNumber:this.state.responsesNumber,timer:!this.state.override,questionTitle:this.state.question.question_title,hidden:!this.state.override&&!this.state.question.is_open},s.a.createElement(Ha.Bar,{key:this.props.selectedQuestionId,data:this.state.data,options:e}))}}]),t}(s.a.Component))||Pa)||Pa)||Pa,tn=a(105),an=a.n(tn),nn=a(107),sn=a.n(nn),rn=a(44),on=a.n(rn),ln=a(106),cn=a.n(ln),un=a(67),dn=a.n(un),pn=Na()(me),hn=Object(g.b)("profStore")(Va=Object(g.b)("apiService")(Va=Object(g.c)(Va=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.state={question:{id:0},responsesNumber:0,responses:{},override:!1},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.profStore.getQuestionWithId(this.props.parentLecture,this.props.selectedQuestionId);this.setState({override:this.props.override,question:t}),this.state.question.id!==this.props.selectedQuestionId&&0!==this.props.selectedQuestionId&&pn.emit("subscribe professor",t.id),this.props.override?this.props.apiService.loadAnswers(this.props.selectedQuestionId).then(function(t){t.question_id===e.props.selectedQuestionId&&e.setState({responsesNumber:t.count,responses:t.answers})}):pn.on("new results",function(t){t.question_id===e.props.selectedQuestionId&&e.setState({responsesNumber:t.count,responses:t.answers})})}},{key:"componentWillReceiveProps",value:function(e){var t=e.profStore.getQuestionWithId(e.parentLecture,e.selectedQuestionId);this.setState({override:e.override,question:t})}},{key:"componentWillUnmount",value:function(){this.state.override||pn.removeAllListeners("new results")}},{key:"render",value:function(){var e=this;return s.a.createElement(Ka,{question:this.state.question,responsesNumber:this.state.responsesNumber,timer:!this.state.override,questionTitle:this.state.question.question_title,hidden:!this.state.override&&!this.state.question.is_open},s.a.createElement(an.a,null,s.a.createElement(cn.a,null,s.a.createElement(dn.a,null,s.a.createElement(on.a,null,"Response"),s.a.createElement(on.a,{align:"right"},"Frequency"))),s.a.createElement(sn.a,null,Object.keys(this.state.responses).map(function(t,a){return s.a.createElement(dn.a,{key:a},s.a.createElement(on.a,{component:"th",scope:"row"},t),s.a.createElement(on.a,{align:"right"},e.state.responses[t]))}))))}}]),t}(s.a.Component))||Va)||Va)||Va,mn=Na()(me),fn=Object(g.b)("profStore")(Ma=Object(g.b)("apiService")(Ma=Object(g.c)(Ma=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.state={question:{id:0},data:{},responsesNumber:0,override:!1},Ha.defaults.global.legend.display=!1,Ha.defaults.global.tooltips.enabled=!1,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(0!==this.props.selectedQuestionId){var t=this.props.profStore.getQuestionWithId(this.props.parentLecture,this.props.selectedQuestionId);this.setState({question:t})}if(this.state.question.id!==this.props.selectedQuestionId)if(0!==this.props.selectedQuestionId){var a=this.props.profStore.getQuestionWithId(this.props.parentLecture,this.props.selectedQuestionId);mn.emit("subscribe professor",a.id),this.updateChartLabels(a)}else this.setState({question:{id:0,data:{labels:[]}}});this.props.override?this.props.apiService.loadAnswers(this.props.selectedQuestionId).then(function(t){t.question_id===e.props.selectedQuestionId&&e.updateChartData(t.answers,t.count)}):mn.on("new results",function(t){t.question_id===e.props.selectedQuestionId&&e.updateChartData(t.answers,t.count)}),this.setState({override:this.props.override})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.profStore.getQuestionWithId(e.parentLecture,e.selectedQuestionId);this.setState({override:e.override,question:a}),a.id===this.state.question.id&&(this.state.question.id!==e.selectedQuestionId&&(0!==e.selectedQuestionId?(mn.emit("subscribe professor",a.id),this.updateChartLabels(a)):this.setState({question:{id:0,data:{labels:[]}}})),e.override?e.apiService.loadAnswers(e.selectedQuestionId).then(function(a){a.question_id===e.selectedQuestionId&&t.updateChartData(a.answers,a.count)}):mn.on("new results",function(a){a.question_id===e.selectedQuestionId&&t.updateChartData(a.answers,a.count)}))}},{key:"updateChartLabels",value:function(e){for(var t=[],a=0;a<=100;a++)a%10===0?t.push(a):t.push("");this.setState({question:e,data:{labels:t}})}},{key:"updateChartData",value:function(e,t){this.setState({data:{datasets:[{label:"Question Statistics",backgroundColor:"#E9C46A",borderColor:"#E9C46A",data:e}]},responsesNumber:t})}},{key:"componentWillUnmount",value:function(){this.state.override||mn.removeAllListeners("new results")}},{key:"render",value:function(){var e={scales:{yAxes:[{ticks:{beginAtZero:!0,userCallback:function(e,t,a){if(Math.floor(e)===e)return e}}}]}};return s.a.createElement(Ka,{question:this.state.question,responsesNumber:this.state.responsesNumber,timer:!this.state.override,questionTitle:this.state.question.question_title,hidden:!this.state.override&&!this.state.question.is_open},s.a.createElement(Ha.Bar,{key:this.props.selectedQuestionId,data:this.state.data,options:e}))}}]),t}(s.a.Component))||Ma)||Ma)||Ma;var bn,gn,yn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,question:{id:0}},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.props.classes;return"multiple_choice"===this.props.question.question_type?e=s.a.createElement(en,{key:this.props.index,parentLecture:this.props.parentLecture,selectedQuestionId:this.props.question.id,override:!0}):"free_text"===this.props.question.question_type?e=s.a.createElement(hn,{key:this.props.index,parentLecture:this.props.parentLecture,selectedQuestionId:this.props.question.id,override:!0}):"slider"===this.props.question.question_type&&(e=s.a.createElement(fn,{key:this.props.index,parentLecture:this.props.parentLecture,selectedQuestionId:this.props.question.id,override:!0})),s.a.createElement("div",null,s.a.createElement($.a,{color:"secondary",onClick:this.handleOpen},s.a.createElement(Ya.a,null)),s.a.createElement(Je.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.open,onClose:this.handleClose},s.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:t.paper},e)))}}]),t}(s.a.Component),vn=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper}}})(yn),En=function e(t,a,n,s,r,i,o,c,u,d,p,h,m){Object(l.a)(this,e),this.id=t,this.lecture_id=a,this.question_type=n,this.question_title=s,this.question_image=r,this.correct_answer=i,this.creator_id=o,this.is_open=c,this.opened_at=u,this.closed_at=d,this.created_at=p,this.modified_at=h,this.answer=m},wn=function(e){function t(e,a,n,s,r,i,o,c,p,h,m,f,b,g,y,v,E,w,S){var _;return Object(l.a)(this,t),(_=Object(u.a)(this,Object(d.a)(t).call(this,e,a,n,s,r,i,o,c,p,h,m,f,b))).option1=g,_.option2=y,_.option3=v,_.option4=E,_.option5=w,_.number_of_options=S,_}return Object(p.a)(t,e),t}(En),Sn=function(e){function t(e,a,n,s,r,i,o,c,p,h,m,f,b,g,y){var v;return Object(l.a)(this,t),(v=Object(u.a)(this,Object(d.a)(t).call(this,e,a,n,s,r,i,o,c,p,h,m,f,b))).lower_label=g,v.upper_label=y,v}return Object(p.a)(t,e),t}(En),_n=function(e){function t(e,a,n,s,r,i,o,c,p,h,m,f,b,g){var y;return Object(l.a)(this,t),(y=Object(u.a)(this,Object(d.a)(t).call(this,e,a,n,s,r,i,o,c,p,h,m,f,b))).word_limit=g,y}return Object(p.a)(t,e),t}(En),On=Object(g.c)(bn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,title:"",correct_answer:"",error:"",titleValid:!0,question_image:""},a.handleClose=function(){a.setState({open:!1})},a.handleChange=function(e){return function(t){var n=t.target.value;a.setState(Object(b.a)({},e,n),function(){a.handleValidation(e,n)})}},a.handleOpen=function(){a.setState({open:!0})},a.handleSubmit=function(e){e.preventDefault(),a.state.titleValid&&a.props.getEdits(new _n(a.props.questionObj.id,a.props.questionObj.lecture_id,"free_text",a.state.title,a.state.question_image,a.state.correct_answer,a.props.questionObj.creator_id,a.props.questionObj.is_open,a.props.questionObj.opened_at,a.props.questionObj.closed_at,a.props.questionObj.created_at,null,null,a.props.questionObj.word_limit)),a.handleClose()},a.removeImage=function(){a.setState({question_image:""})},a.encodeImageFileAsURL=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){console.log("RESULT",n.result),a.setState({question_image:n.result})},n.onloadend=n.onloadend.bind(Object(ca.a)(Object(ca.a)(a))),n.readAsDataURL(t)},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=new we(a.profStore),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){null!==this.props.questionObj.correct_answer?this.setState({title:this.props.questionObj.question_title,question_image:this.props.questionObj.question_image,correct_answer:this.props.questionObj.correct_answer}):this.setState({title:this.props.questionObj.question_title,question_image:this.props.questionObj.question_image})}},{key:"handleValidation",value:function(){""===this.state.title?this.setState({error:"This field is required",titleValid:!1}):this.setState({error:"",titleValid:!0})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ne.a,{variant:"outlined",onClick:this.handleOpen,disabled:this.props.is_open},"Edit"),s.a.createElement(zt.a,{fullWidth:!0,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Edit Free Text Question"),s.a.createElement($t.a,null,s.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},s.a.createElement(N.a,{container:!0,direction:"column",justify:"center"},s.a.createElement(N.a,{item:!0},s.a.createElement(it.a,{required:!0,fullWidth:!0,error:!this.state.titleValid&&!(""===this.state.error),label:"Question Title",value:this.state.title,onChange:this.handleChange("title"),margin:"normal",helperText:this.state.error})),s.a.createElement(N.a,{item:!0},s.a.createElement(it.a,{fullWidth:!0,label:"Correct Answer",value:this.state.correct_answer,onChange:this.handleChange("correct_answer"),margin:"normal"})))),s.a.createElement(W.a,{in:this.state.question_image,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Image Preview")),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("img",{src:this.state.question_image,height:300,alt:"Preview Unavailable"}))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(N.a,{item:!0,className:this.styles.buttonItem},s.a.createElement(Ne.a,{variant:"contained",component:"label"},this.state.question_image?"Update Image":"Upload Image",s.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.encodeImageFileAsURL}))),s.a.createElement(W.a,{in:this.state.question_image,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.buttonItem},s.a.createElement(Ne.a,{variant:"contained",component:"label",onClick:this.removeImage},"Remove Image")))))),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"cancel"),s.a.createElement(Ne.a,{onClick:this.handleSubmit,color:"secondary",disabled:!this.state.titleValid},"submit"))))}}]),t}(s.a.Component))||bn,Cn=Object(y.withStyles)(function(e){return{button:{color:e.palette.secondary.main},item:{paddingBottom:e.spacing.unit},buttonItem:{paddingRight:e.spacing.unit},icon:{margin:e.spacing.unit}}})(On),jn=a(119),kn=a.n(jn),In=a(120),qn=a.n(In);function xn(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return Qn(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qn(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw r}}}}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ln(e){if(e.length<2)return!1;var t,a=xn(e);try{for(a.s();!(t=a.n()).done;)for(var n=t.value,s=0,r=Object.values(n);s<r.length;s++){var i=r[s];if(void 0===i)return!1;if(""===i.replace(/^\s+|\s+$/g,""))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}var Nn,Dn,Tn,An,Pn,Vn,Mn=Object(g.c)(gn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,title:"",correct_answer:"",number_of_options:"",question_image:"",options:[],answer_choices:{option1:"",option2:"",option3:"",option4:"",option5:""},checked:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},should_delete:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},titleError:"",formValid:!0,titleValid:!0,hasAnswers:!0,optionsValid:!0,delete_mode:!1,deleteDisabled:!1,deleteConfirmDisabled:!1},a.handleClose=function(){a.setState({open:!1})},a.handleOption=function(e){return function(t){var n=Object.keys(e)[0],s=a.state.answer_choices,r=a.state.options;s[n]=t.target.value,r.find(function(e){return Object.keys(e)[0]===n})[n]=t.target.value,a.setState({answer_choices:s,options:r},function(){a.validateFields("answer_choices",r)})}},a.handleSetNumberOfOptions=function(e){return function(t){for(var n=[],s=a.state.answer_choices,r=t.target.value<=2,i=1;i<=t.target.value;i++){var o="option"+i.toString();n.push(Object(b.a)({},o,a.state.answer_choices[o]))}if(t.target.value<a.state.number_of_options)for(var l=t.target.value+1;l<=5;l++){s["option"+l.toString()]=""}a.setState({answer_choices:s,number_of_options:t.target.value,options:n,deleteDisabled:r},function(){a.validateFields(e,n)})}},a.handleDeleteQueue=function(e){return function(t){var n=a.state.should_delete;t.target.checked?n[e]=!0:n[e]=!1;for(var s=0,r=0,i=Object.keys(n);r<i.length;r++){n[i[r]]||s++}s-=5-a.state.number_of_options,a.setState({should_delete:n,deleteConfirmDisabled:s<2})}},a.handleCheck=function(e){return function(t){var n=Object.keys(e)[0],s=a.state.checked,r=n;s[n]=t.target.checked,a.state.correct_answer===n&&(s[n]=!1,r=""),a.setState({correct_answer:r,checked:s})}},a.handleChange=function(e){return function(t){var n=t.target.value;a.setState(Object(b.a)({},e,n),function(){a.validateFields(e,n)})}},a.handleOpen=function(){a.setState({open:!0})},a.handleSubmit=function(e){if(e.preventDefault(),a.state.formValid){var t="";""!==a.state.correct_answer&&null!==a.state.correct_answer&&(t=a.state.correct_answer.substring(6,7)),a.state.formValid&&a.props.getEdits(new wn(a.props.questionObj.id,a.props.questionObj.lecture_id,"multiple_choice",a.state.title,a.state.question_image,t,a.props.questionObj.creator_id,a.props.questionObj.is_open,a.props.questionObj.opened_at,a.props.questionObj.closed_at,a.props.questionObj.created_at,a.props.questionObj.modified_at,a.props.questionObj.answer,a.state.answer_choices.option1,a.state.answer_choices.option2,a.state.answer_choices.option3,a.state.answer_choices.option4,a.state.answer_choices.option5,a.state.number_of_options)),a.handleClose()}},a.removeImage=function(){a.setState({question_image:""})},a.encodeImageFileAsURL=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){console.log("RESULT",n.result),a.setState({question_image:n.result})},n.onloadend=n.onloadend.bind(Object(ca.a)(Object(ca.a)(a))),n.readAsDataURL(t)},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=new we(a.profStore),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){for(var e={},t=this.state.checked,a=this.props.questionObj.correct_answer,n=Number(this.props.questionObj.number_of_options),s=[],r=1;r<=n;r++){var i="option"+r.toString();e[i]=this.props.questionObj[i],s.push(Object(b.a)({},i,e[i]))}null!==a&&(t[a="option"+a]=!0),this.setState({title:this.props.questionObj.question_title,question_image:this.props.questionObj.question_image,correct_answer:a,number_of_options:n,answer_choices:e,checked:t,options:s})}},{key:"handleDelete",value:function(){for(var e=this,t=this.state.answer_choices,a=this.state.number_of_options,n=[],s="",r={option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},i=0,o=Object.keys(this.state.should_delete);i<o.length;i++){var l=o[i];this.state.should_delete[l]&&a--}if(a<2)this.setState({should_delete:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},delete_mode:!1});else{for(var c=1,u=0,d=Object.keys(t);u<d.length;u++){var p=d[u];if(!this.state.should_delete[p]){var h="option"+c.toString();if(n.push(Object(b.a)({},h,t[p])),p===this.state.correct_answer&&(s=h),++c>a)break}}t={option1:"",option2:"",option3:"",option4:"",option5:""},n.map(function(e){return t[Object.keys(e)[0]]=Object.values(e)[0]}),""!==s&&null!==s&&(r[s]=!0),this.setState({should_delete:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},answer_choices:t,correct_answer:s,checked:r,number_of_options:a,delete_mode:!1,options:n,deleteDisabled:a<=2},function(){e.validateFields("answer_choices",n)})}}},{key:"validateFields",value:function(e,t){var a=this.state.titleValid,n=this.state.errors,s=this.state.hasAnswers,r=this.state.optionsValid,i=this.state.titleError;switch(e){case"title":""===t?(i="This field is required",a=!1):(i="",a=!0);break;case"number_of_options":s=!0,r=Ln(t);break;case"answer_choices":r=Ln(t)}this.setState({errors:n,titleValid:a,titleError:i,hasAnswers:s,optionsValid:r},this.validateForm)}},{key:"validateForm",value:function(){var e=""!==this.state.title.replace(/^\s+|\s+$/g,"");e||this.setState({titleValid:!1}),this.setState({formValid:e&&this.state.hasAnswers&&this.state.optionsValid})}},{key:"setDeleteMode",value:function(){var e=!this.state.delete_mode;this.setState({delete_mode:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(Ne.a,{variant:"outlined",onClick:this.handleOpen,disabled:this.props.is_open},"Edit"),s.a.createElement(zt.a,{fullWidth:!0,scroll:"paper",open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Edit Multiple Choice Question"),s.a.createElement($t.a,null,s.a.createElement(N.a,{container:!0,direction:"column",justify:"center"},s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("form",{className:this.styles.container,onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},s.a.createElement(it.a,{required:!0,fullWidth:!0,error:!this.state.titleValid,id:"standard-name",label:"Question Title",value:this.state.title,onChange:this.handleChange("title"),margin:"normal",helperText:this.state.titleError}))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("form",{autoComplete:"off"},s.a.createElement($e.a,null,s.a.createElement(kn.a,{htmlFor:"number-options"},"number of answer choices"),s.a.createElement(qn.a,{value:this.state.number_of_options,onChange:this.handleSetNumberOfOptions("number_of_options"),className:this.styles.select,disabled:this.state.delete_mode,inputProps:{name:"number_of_options",id:"number-options"}},s.a.createElement(le.a,{value:2},"2"),s.a.createElement(le.a,{value:3},"3"),s.a.createElement(le.a,{value:4},"4"),s.a.createElement(le.a,{value:5},"5"))))),this.state.hasAnswers&&s.a.createElement(N.a,{item:!0},s.a.createElement(an.a,null,s.a.createElement(cn.a,null,s.a.createElement(dn.a,null,this.state.delete_mode?s.a.createElement(on.a,null," Delete?"):s.a.createElement(on.a,null,"Correct Answer?"),s.a.createElement(on.a,null,"Answer Choices"))),s.a.createElement(sn.a,null,this.state.delete_mode?this.state.options.map(function(t,a){return s.a.createElement(dn.a,{key:a},s.a.createElement(on.a,null,s.a.createElement(Nt.a,{checked:e.state.should_delete[Object.keys(t)[0]],onChange:e.handleDeleteQueue(Object.keys(t)[0]),value:Object.keys(t)[0]})),s.a.createElement(on.a,null,s.a.createElement(M.a,{variant:"body1",align:"justify"}," ",e.state.answer_choices[Object.keys(t)[0]])))}):this.state.options.map(function(t,a){return s.a.createElement(dn.a,{key:a},s.a.createElement(on.a,null,s.a.createElement(Nt.a,{checked:e.state.correct_answer===Object.keys(t)[0],onChange:e.handleCheck(t),value:Object.keys(t)[0]})),s.a.createElement(on.a,{align:"right"},s.a.createElement($e.a,null,s.a.createElement(He.a,{multiline:!0,id:"bootstrap-input",name:Object.keys(t)[0],value:e.state.answer_choices[Object.keys(t)[0]],onChange:e.handleOption(t),classes:{input:e.styles.bootstrapInput}}))))}))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},this.state.delete_mode?s.a.createElement($.a,{color:"secondary",onClick:this.handleDelete.bind(this),disabled:this.state.deleteConfirmDisabled},s.a.createElement(Be.a,{className:this.styles.iconDone})):s.a.createElement($.a,{onClick:this.setDeleteMode.bind(this),color:"secondary",disabled:this.state.deleteDisabled},s.a.createElement(Bt.a,null)))),s.a.createElement(W.a,{in:this.state.question_image,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Image Preview")),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("img",{src:this.state.question_image,height:300,alt:"Preview Unavailable"}))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(N.a,{item:!0,className:this.styles.buttonItem},s.a.createElement(Ne.a,{variant:"contained",component:"label"},this.state.question_image?"Update Image":"Upload Image",s.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.encodeImageFileAsURL}))),s.a.createElement(W.a,{in:this.state.question_image,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.buttonItem},s.a.createElement(Ne.a,{variant:"contained",component:"label",onClick:this.removeImage},"Remove Image"))))))),s.a.createElement(Ht.a,null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(Ne.a,{onClick:this.handleClose,type:"button",autoFocus:!0,color:"secondary"},"Cancel"),s.a.createElement(Ne.a,{onClick:this.handleSubmit,type:"submit",color:"secondary",disabled:!this.state.formValid},"Submit")))))}}]),t}(s.a.Component))||gn,Fn=Object(y.withStyles)(function(e){return{button:{color:e.palette.secondary.main},select:{width:200},icon:{margin:e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},item:{paddingBottom:e.spacing.unit},buttonItem:{paddingRight:2*e.spacing.unit},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:12,padding:"10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}})(Mn),Wn=a(110),Rn=a.n(Wn),Bn=a(53),Un=a.n(Bn),zn=a(72),Yn=a.n(zn),Hn=a(86),Gn=a.n(Hn),$n=[{value:"=",label:"="},{value:"<",label:"<"},{value:">",label:">"},{value:"<=",label:"<="},{value:">=",label:">="}],Zn=[{value:"<",label:"<"},{value:">",label:">"},{value:"<=",label:"<="},{value:">=",label:">="}],Jn=Object(g.c)(Nn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,title:"",titleError:"",question_image:"",labels:{lower:"0%",upper:"100%"},answer_bounds:{upper:"",lower:""},range:!1,rangeVal:"not_range",equality_operators:{upper:"",lower:""},slider_value:50,has_correct_answer:!1,custom_labels:!1,fieldsValid:{title:!0,lower_label:!0,upper_label:!0,lower_bound:!0,upper_bound:!0,equality_operators:!0},disabled:!1},a.handleClose=function(){a.setState({open:!1})},a.setCorrectAnswer=function(e){return function(t){t.target.checked||a.setState({answer_bounds:{upper:"",lower:""},equality_operators:{upper:"",lower:""},range:!1,rangeVal:"not_range"}),a.setState(Object(b.a)({},e,t.target.checked),function(){a.validateBoundsAndOperators()})}},a.setCustomLabels=function(e){return function(t){if(!t.target.checked){var n=a.state.fieldsValid;n.lower_label=!0,n.upper_label=!0,a.setState({fieldsValid:n,labels:{upper:"100%",lower:"0%"},custom_labels:!1})}a.setState(Object(b.a)({},e,t.target.checked)),a.validateAnswers()}},a.setCorrectBounds=function(e){return function(t){var n=a.state.answer_bounds,s=t.target.value;n[e]=s,s<0&&(s=0),s>100&&(s=100),Number.isInteger(s)||(s=Math.round(s)),a.setState({answer_bounds:n},function(){a.validateBoundsAndOperators()})}},a.handleEqualityOperator=function(e){return function(t){var n=a.state.equality_operators;n[e]=t.target.value,a.setState({equality_operators:n},function(){a.validateBoundsAndOperators()})}},a.handleTitleChange=function(e){return function(e){var t=e.target.value;a.setState({title:t},function(){a.validateTitle(t)})}},a.handleLabelsChange=function(e){return function(t){var n=t.target.value,s=a.state.labels;s[e]=t.target.value,a.setState({labels:s},function(){a.handleLabelsValidation(e,n)})}},a.handleSliderChange=function(e,t){a.setState({slider_value:t})},a.handleSetRange=function(e){var t=!0;"not_range"===e.target.value&&(t=!1),a.setState({rangeVal:e.target.value,range:t})},a.handleOpen=function(){a.setState({open:!0})},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.disabled){var t="";if(""!==a.state.answer_bounds.lower)if(a.state.range){var n=a.state.answer_bounds,s=a.state.equality_operators;if(Number(n.lower)>Number(n.upper)){var r=n.lower;n.lower=n.upper,n.upper=r;var i=a.state.equality_operators,o=a.state.equality_operators.lower;i.lower=i.upper,i.upper=o}t=s.lower+" "+n.lower.toString()+" "+a.getOperatorCondition(s.lower)+" "+s.upper+" "+n.upper.toString()}else t=a.state.equality_operators.lower+" "+a.state.answer_bounds.lower.toString();a.state.disabled||a.props.getEdits(new Sn(a.props.questionObj.id,a.props.questionObj.lecture_id,"slider",a.state.title,a.state.question_image,t,a.props.questionObj.creator_id,a.props.questionObj.is_open,a.props.questionObj.opened_at,a.props.questionObj.closed_at,a.props.questionObj.created_at,null,null,a.state.labels.lower,a.state.labels.upper)),a.handleClose()}},a.removeImage=function(){a.setState({question_image:""})},a.encodeImageFileAsURL=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){console.log("RESULT",n.result),a.setState({question_image:n.result})},n.onloadend=n.onloadend.bind(Object(ca.a)(Object(ca.a)(a))),n.readAsDataURL(t)},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=new we(a.profStore),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.questionObj,t=e.lower_label,a=e.upper_label,n=e.correct_answer;if(this.setState({title:this.props.questionObj.question_title,question_image:this.props.questionObj.question_image}),null!==t&&("0%"===t&&"100%"===a||this.setState({labels:{lower:t,upper:a}})),n){var s=n.split(" ");2===s.length?this.setState({answer_bounds:{lower:s[1],upper:""},equality_operators:{lower:s[0],upper:""}}):this.setState({answer_bounds:{lower:s[1],upper:s[4]},equality_operators:{lower:s[0],upper:s[3]},range:!0,rangeVal:"range"})}}},{key:"validateAnswers",value:function(){var e=!1;if(this.state.custom_labels&&this.state.has_correct_answer)for(var t=0,a=Object.keys(this.state.fieldsValid);t<a.length;t++){var n=a[t];this.state.fieldsValid[n]||(e=!0)}else this.state.custom_labels?this.state.fieldsValid.lower_label&&this.state.fieldsValid.upper_label&&this.state.fieldsValid.title||(e=!0):this.state.has_correct_answer?this.state.fieldsValid.lower_bound&&this.state.fieldsValid.upper_bound&&this.state.fieldsValid.equality_operators||(e=!0):this.state.fieldsValid.title||(e=!0);this.state.fieldsValid.title||(e=!0),this.setState({disabled:e})}},{key:"getOppBound",value:function(e){return"upper_bound"===e?"lower_bound":"upper_bound"}},{key:"getOppSide",value:function(e){return"upper"===e?"lower":"upper"}},{key:"isInRange",value:function(e,t){return""!==e.replace(/^\s+|\s+$/g,"")&&(""!==t.replace(/^\s+|\s+$/g,"")&&(("<"!==e||"0"!==t)&&(">"!==e||"100"!==t)))}},{key:"validateBoundsAndOperators",value:function(){var e=this,t=!0,a=this.state.fieldsValid;if(this.isInRange(this.state.equality_operators.lower,this.state.answer_bounds.lower)||(a.equality_operators=!1,a.lower_bound=!1,t=!1),this.state.range){this.isInRange(this.state.equality_operators.upper,this.state.answer_bounds.upper)||(a.equality_operators=!1,a.upper_bound=!1,t=!1),this.state.answer_bounds.lower===this.state.answer_bounds.upper&&(a.equality_operators=!1,a.lower_bound=!1,t=!1);var n=!0;switch(this.state.equality_operators.lower){case">":case">=":n=">"!==this.state.equality_operators.upper&&">="!==this.state.equality_operators.upper;break;case"<":case"<=":n="<"!==this.state.equality_operators.upper&&"<="!==this.state.equality_operators.upper;break;default:n=!0}a.equality_operators=n&&a.equality_operators,n||(t=!1)}t&&(a={title:this.state.fieldsValid.title,lower_label:!0,upper_label:!0,lower_bound:!0,upper_bound:!0,equality_operators:!0}),this.setState({fieldsValid:a},function(){e.validateAnswers()})}},{key:"validateTitle",value:function(e){var t=this.state.titleError,a=this.state.fieldsValid;""===e.replace(/^\s+|\s+$/g,"")?(t="Required",a.title=!1):(t="",a.title=!0),this.setState({titleError:t,fieldsValid:a}),this.validateAnswers()}},{key:"handleLabelsValidation",value:function(){var e=!1;""!==this.state.labels.upper.replace(/^\s+|\s+$/g,"")&&""!==this.state.labels.lower.replace(/^\s+|\s+$/g,"")&&(e=!0);var t=this.state.fieldsValid;t.lower_label=e,t.upper_label=e,this.setState({fieldsValid:t}),this.validateAnswers()}},{key:"getOperatorCondition",value:function(e){var t=!0;switch(e){case"<":case"<=":t="||";break;case">":case">=":t="&&";break;default:t=!0}return t}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ne.a,{variant:"outlined",onClick:this.handleOpen,disabled:this.props.is_open},"Edit"),s.a.createElement(zt.a,{fullWidth:!0,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Edit Slider Question"),s.a.createElement($t.a,null,s.a.createElement(N.a,{container:!0,justify:"center",className:this.styles.container},s.a.createElement(N.a,{container:!0,direction:"column","align-items":"flex-start"},s.a.createElement(N.a,{item:!0,className:this.styles.entry},s.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},s.a.createElement(it.a,{required:!0,fullWidth:!0,error:""!==this.state.titleError,id:"standard-name",label:"Question Title",value:this.state.title,onChange:this.handleTitleChange("title"),margin:"normal",helperText:this.state.titleError}))),s.a.createElement(W.a,{in:this.state.question_image,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.entry},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Image Preview")),s.a.createElement(N.a,{item:!0,className:this.styles.entry},s.a.createElement("img",{src:this.state.question_image,height:300,alt:"Preview Unavailable"}))),s.a.createElement(N.a,{item:!0,className:this.styles.entry},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(N.a,{item:!0,className:this.styles.buttonItem},s.a.createElement(Ne.a,{variant:"contained",component:"label"},this.state.question_image?"Update Image":"Upload Image",s.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.encodeImageFileAsURL}))),s.a.createElement(W.a,{in:this.state.question_image,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.buttonItem},s.a.createElement(Ne.a,{variant:"contained",component:"label",onClick:this.removeImage},"Remove Image")))))),s.a.createElement(N.a,{container:!0,direction:"column",justify:"flex-start"},s.a.createElement(N.a,{item:!0},s.a.createElement(Pt.a,{control:s.a.createElement(Rn.a,{checked:this.state.custom_labels,onChange:this.setCustomLabels("custom_labels"),value:this.state.custom_labels}),label:"change/set labels"})),this.state.custom_labels&&s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:24,className:this.styles.entry},s.a.createElement(N.a,{item:!0,xs:12,sm:6},s.a.createElement(it.a,{fullWidth:!0,id:"standard-name",label:"lower label",value:this.state.labels.lower,onChange:this.handleLabelsChange("lower"),margin:"normal"})),s.a.createElement(N.a,{item:!0,xs:12,sm:6},s.a.createElement(it.a,{fullWidth:!0,id:"standard-name",label:"upper label",value:this.state.labels.upper,onChange:this.handleLabelsChange("upper"),margin:"normal"}))))),s.a.createElement(N.a,{container:!0,direction:"column",justify:"space-evenly"},s.a.createElement(N.a,{item:!0},s.a.createElement(Pt.a,{control:s.a.createElement(Rn.a,{checked:this.state.has_correct_answer,onChange:this.setCorrectAnswer("has_correct_answer"),value:this.state.has_correct_answer}),label:"change/set correct answer"})),this.state.has_correct_answer&&s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement($e.a,{component:"fieldset"},s.a.createElement(Gn.a,{name:"rangeVal",value:this.state.rangeVal,onChange:this.handleSetRange},s.a.createElement(Pt.a,{value:"not_range",name:"not_range",control:s.a.createElement(Yn.a,null),label:"inequality/equality"}),s.a.createElement(Pt.a,{value:"range",name:"range",control:s.a.createElement(Yn.a,null),label:"set range"}))))),this.state.has_correct_answer&&this.state.range?s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",className:this.styles.entry,spacing:16},s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{select:!0,value:this.state.equality_operators.lower,onChange:this.handleEqualityOperator("lower"),InputProps:{startAdornment:s.a.createElement(Un.a,{position:"start"},"answer")}},Zn.map(function(e){return s.a.createElement(le.a,{key:e.value,value:e.value},e.label)}))),s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{id:"correct answer lower bound",type:"number",value:this.state.answer_bounds.lower,onChange:this.setCorrectBounds("lower"),InputProps:{endAdornment:s.a.createElement(Un.a,{variant:"filled",position:"end"},"%")}})),s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{select:!0,value:this.state.equality_operators.upper,onChange:this.handleEqualityOperator("upper"),InputProps:{startAdornment:s.a.createElement(Un.a,{position:"start"},"and/or")}},Zn.map(function(e){return s.a.createElement(le.a,{key:e.value,value:e.value},e.label)}))),s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{id:"correct answer upper bound",type:"number",value:this.state.answer_bounds.upper,onChange:this.setCorrectBounds("upper"),InputProps:{endAdornment:s.a.createElement(Un.a,{variant:"filled",position:"end"},"%")}})))):this.state.has_correct_answer&&s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",className:this.styles.entry},s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",spacing:24},s.a.createElement(N.a,{item:!0,xs:6},s.a.createElement(it.a,{select:!0,fullWidth:!0,value:this.state.equality_operators.lower,onChange:this.handleEqualityOperator("lower"),InputProps:{startAdornment:s.a.createElement(Un.a,{position:"start"},"answer")}},$n.map(function(e){return s.a.createElement(le.a,{key:e.value,value:e.value},e.label)}))),s.a.createElement(N.a,{item:!0,xs:6},s.a.createElement(it.a,{fullWidth:!0,id:"correct answer lower bound",type:"number",value:this.state.answer_bounds.lower,onChange:this.setCorrectBounds("lower"),InputProps:{endAdornment:s.a.createElement(Un.a,{variant:"filled",position:"end"},"%")}}))))))))),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"cancel"),s.a.createElement(Ne.a,{onClick:this.handleSubmit,color:"secondary",disabled:this.state.disabled},"submit"))))}}]),t}(s.a.Component))||Nn,Kn=Object(y.withStyles)(function(e){return{gridItem:{padding:e.spacing.unit},button:{color:e.palette.secondary.main},icon:{margin:e.spacing.unit},card:{backgroundColor:e.palette.secondary.main,padding:.25*e.spacing.unit,marginRight:2.5*e.spacing.unit,width:45},percentText:{color:"white"},labels:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"0.75em",display:"flex",justifyContent:"center"},titleWrap:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"1.5em",display:"flex"},entry:{maxWidth:500,paddingBottom:e.spacing.unit},buttonItem:{paddingRight:2*e.spacing.unit},titleContainer:{paddingTop:e.spacing.unit,paddingBottom:2*e.spacing.unit},slidercontainer:{paddingRight:2*e.spacing.unit},gridContainer:{margin:e.spacing.unit},container:{flexWrap:"wrap"},andor:{padding:e.spacing.unit,width:"15%"}}})(Jn),Xn=Object(g.c)(Dn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={selected:!1,open:!1,editMode:!1},a.handleToUpdate=function(e){a.setState({selected:e})},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.profStore.dataLoaded||this.props.apiProfService.loadData().then(function(){e.props.profStore.dataLoaded=!0}),void 0!==this.props.parentLecture&&void 0!==this.props.questionObj.id&&this.setState({selected:this.props.profStore.getQuestionWithId(this.props.parentLecture,this.props.questionObj.id).is_open}),this.setState({editMode:"editMode"===this.props.mode})}},{key:"componentDidUpdate",value:function(e){e.parentLecture.id!==this.props.parentLecture.id&&this.setState({selected:this.props.profStore.getQuestionWithId(this.props.parentLecture,this.props.questionObj.id).is_open})}},{key:"render",value:function(){return s.a.createElement(T.a,{selected:this.state.selected,divider:!0},s.a.createElement(j.a,{primary:this.props.number+1+". "+this.props.questionObj.question_title}),s.a.createElement(H.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0,className:this.styles.open},"viewingMode"===this.props.mode?s.a.createElement(Ua,{className:this.styles.open,parentLecture:this.props.parentLecture,questionId:this.props.questionObj.id,handleListClose:this.props.handleListClose,handleClick:this.props.handleClick,handleToUpdate:this.handleToUpdate,open:this.props.questionObj.is_open,recentlyClosedId:this.props.recentlyClosedId,recentlyOpenedId:this.props.recentlyOpenedId}):"free_text"===this.props.questionObj.question_type?s.a.createElement(Cn,{questionObj:this.props.questionObj,getEdits:this.props.getEdits,is_open:this.state.selected}):"multiple_choice"===this.props.questionObj.question_type?s.a.createElement(Fn,{questionObj:this.props.questionObj,getEdits:this.props.getEdits,is_open:this.state.selected}):s.a.createElement(Kn,{questionObj:this.props.questionObj,getEdits:this.props.getEdits,is_open:this.state.selected})),s.a.createElement(N.a,{item:!0},s.a.createElement(ze.a,{title:"View Stats",placement:"top"},s.a.createElement(vn,{index:this.props.number+1,question:this.props.questionObj,parentLecture:this.props.parentLecture}))))))}}]),t}(s.a.Component))||Dn,es=Object(y.withStyles)(function(e){return{open:{marginTop:5}}})(Xn),ts=Object(g.c)(Tn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={referrerLectureId:null,delQuestions:[],questions:[]},a.handleChange=function(e){return function(t){a.state.delQuestions.find(function(t){return t.id===e}).checked=t.target.checked,a.setState({delQuestions:a.state.delQuestions}),a.props.getDeletions(a.state.delQuestions)}},a.styles=e.classes,a.profStore=e.profStore,a.questions=e.questions,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){for(var e=[],t=[],a=0;a<this.questions.length;a++)this.questions[a].is_open||t.push(this.questions[a]);t.slice().sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0}).map(function(t,a){return e.push({id:t.id,checked:!1,title:t.question_title})}),void 0!==t&&null!==t&&this.setState({questions:t,delQuestions:e})}},{key:"render",value:function(){var e=this;return this.state.questions.length>0?s.a.createElement($e.a,{component:"fieldset",fullWidth:!0},s.a.createElement(Tt.a,{name:"delQuestions",value:this.state.delQuestions,onChange:this.handleChange},s.a.createElement(O.a,{component:"nav"},this.state.delQuestions.map(function(t,a){return s.a.createElement(T.a,{divider:!0,key:a},s.a.createElement(j.a,{primary:(a+1).toString()+". "+t.title}),s.a.createElement("div",{className:e.styles.checkBoxContainer},s.a.createElement(H.a,null,s.a.createElement(Pt.a,{key:a,control:s.a.createElement(Nt.a,{className:e.styles.checkBox,key:t.id,checked:t.checked,onChange:e.handleChange(t.id),value:t.id})}))))})))):s.a.createElement(M.a,{variant:"body1"}," It looks like all your questions are open... Please close questions you would like to delete. ")}}]),t}(s.a.Component))||Tn,as=Object(y.withStyles)(function(e){return{checkBox:{color:e.palette.primary.dark},checkBoxContainer:{height:4.5*e.spacing.unit,width:12.5*e.spacing.unit,justify:"center"}}})(ts),ns=Object(g.c)(An=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toNewQuestion:!1,deleteMode:!1,editMode:!1,mode:"viewingMode",deletions:[],delTitles:[],open:!1,parentLecture:new ke,lectureTitle:"",questions:[]},a.handleNewQuestionClick=function(){a.setState(function(){return{toNewQuestion:!0}})},a.handleDeleteQuestions=function(){a.props.disableTopButton(),a.setState({mode:"deleteMode",deleteMode:!0,editMode:!1})},a.handleEditQuestions=function(){a.props.disableTopButton(),a.setState({mode:"editMode",deleteMode:!1,editMode:!0})},a.handleRestoreMode=function(){a.props.restoreTopButton(),a.setState({mode:"viewingMode",deleteMode:!1,editMode:!1})},a.getEdits=function(e){a.props.apiProfService.editQuestion(e),a.props.mcqEditDetect()},a.getDeletions=function(e){a.setState({deletions:e})},a.handleDelete=function(){if(0===a.state.deletions.length)a.handleRestoreMode();else{for(var e=[],t=[],n=0;n<a.state.deletions.length;n++)a.state.deletions[n].checked&&(e.push(a.state.deletions[n].id),t.push(a.state.deletions[n].title));e.length>0?a.setState({delTitles:t,delIds:e,open:!0}):a.handleClose()}},a.handleClose=function(){a.setState({deleteMode:!1,open:!1,delIds:[],delTitles:[],deletions:[]})},a.handleDeletion=function(){a.props.handleFinalDeletion(a.state.delIds),a.handleClose(),a.handleRestoreMode()},a.styles=e.classes,a.profStore=e.profStore,a.apiProfService=e.apiProfService,a.parentLectureId=e.parentLectureId,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(console.log("mounting"),this.profStore.dataLoaded){var t=this.profStore.getLectureWithId(this.parentLectureId);void 0!==t&&this.setState({parentLecture:t,questions:t.questions,lectureTitle:t.title})}else this.apiProfService.loadData().then(function(){console.log("loading data"),e.profStore.dataLoaded=!0;var t=e.profStore.getLectureWithId(e.parentLectureId);void 0!==t&&e.setState({parentLecture:t,questions:t.questions,lectureTitle:t.title})})}},{key:"componentWillReceiveProps",value:function(e){var t=e.profStore.getLectureWithId(e.parentLectureId);t.questions.length!==this.state.questions.length&&t.id===this.state.parentLecture.id||this.setState({parentLecture:t,questions:t.questions,lectureTitle:t.title})}},{key:"render",value:function(){var e=this;return!0===this.state.toNewQuestion?s.a.createElement(se.a,{to:"/professor/TODO",push:!0}):s.a.createElement(Te.a,{className:this.styles.card},s.a.createElement(Pe.a,null,console.log(this.state.parentLecture),s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch"},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{className:this.styles.title,variant:"h6",color:"inherit"},"Questions for ",this.state.lectureTitle)),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(N.a,{item:!0},this.state.editMode?s.a.createElement(ze.a,{title:"Done Editing",placement:"top-start"},s.a.createElement($.a,{color:"secondary",onClick:this.handleRestoreMode},s.a.createElement(Be.a,null))):s.a.createElement(ze.a,{title:"Edit Questions",placement:"top-start"},s.a.createElement($.a,{color:"secondary",onClick:this.handleEditQuestions,component:"div",disabled:"deleteMode"===this.state.mode||0===this.state.questions.length},s.a.createElement(Me.a,null)))),s.a.createElement(N.a,{item:!0},this.state.deleteMode?s.a.createElement(ze.a,{title:"Done Deleting",placement:"top-start"},s.a.createElement($.a,{color:"secondary",onClick:this.handleDelete.bind(this)},s.a.createElement(Be.a,null))):s.a.createElement(ze.a,{title:"Delete Questions",placement:"top-start"},s.a.createElement($.a,{color:"secondary",onClick:this.handleDeleteQuestions,component:"div",disabled:"editMode"===this.state.mode||0===this.state.questions.length},s.a.createElement(Bt.a,null)))),s.a.createElement(N.a,{item:!0},s.a.createElement(Wa,{lectureId:this.state.parentLecture.id}))))),this.state.deleteMode?s.a.createElement(as,{questions:this.state.questions,getDeletions:this.getDeletions}):s.a.createElement(O.a,{component:"nav"},this.state.questions.slice().sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0}).map(function(t,a){return s.a.createElement(es,{number:a,mode:e.state.mode,getEdits:e.getEdits,handleListClose:e.props.handleListClose,recentlyOpenedId:e.props.recentlyOpenedId,profStore:e.profStore,handleClick:e.props.handleClick,parentLectureId:e.state.parentLecture.id,parentLecture:e.state.parentLecture,questionObj:t,key:a,recentlyClosedId:e.props.recentlyClosedId})}))),s.a.createElement(zt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},"Are you sure you want to delete the following question(s): "),s.a.createElement($t.a,null,this.state.delTitles.map(function(e,t){return s.a.createElement(Jt.a,{key:t,id:"alert-dialog-description"},e)})),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"No"),s.a.createElement(Ne.a,{onClick:this.handleDeletion,color:"secondary"},"Yes"))))}}]),t}(s.a.Component))||An,ss=Object(y.withStyles)(function(e){return{card:{minWidth:275},startLectureBtn:{float:"right"},title:{margin:e.spacing.unit}}})(ns),rs=Na()(me),is=Object(g.b)("profStore")(Pn=Object(g.b)("apiService")(Pn=Object(g.c)(Pn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).mcqStatsUpdated=function(){a.setState({updateMCQStats:!1})},a.mcqEditDetect=function(){a.setState({updateMCQStats:!0})},a.disableTopButton=function(){a.setState({editDeleteMode:!0})},a.restoreTopButton=function(){a.setState({editDeleteMode:!1})},a.handleFinalDeletion=function(e){for(var t=function(t){(s=a.state.parentLecture.questions.find(function(a){return a.id===e[t]}))&&s.is_open&&(a.apiProfService.closeQuestion(e[t],a.state.parentLecture.id),a.handleListClickClose(e[t]))},n=0;n<e.length;n++){var s;t(n)}a.apiProfService.deleteQuestions(e,a.state.parentLecture.id),a.setState({parentLecture:a.profStore.getLectureWithId(a.props.match.params)})},a.handleBtnClick=function(){switch(a.state.btnStatus){case 0:a.profStore.getQuestionWithId(a.state.parentLecture,a.convertQuestionIndexToId(a.state.currentQuestionIndex)).is_open||(a.setState({recentlyOpenedId:a.convertQuestionIndexToId(a.state.currentQuestionIndex),recentlyClosedId:0}),a.apiProfService.openQuestion(a.convertQuestionIndexToId(a.state.currentQuestionIndex),a.state.parentLecture.id),rs.emit("subscribe professor",a.convertQuestionIndexToId(a.state.currentQuestionIndex)),a.setState({btnStatus:1,openQuestionId:a.convertQuestionIndexToId(a.state.currentQuestionIndex),currentQuestionId:a.convertQuestionIndexToId(a.state.currentQuestionIndex)}));break;case 1:a.apiProfService.closeQuestion(a.state.currentQuestionId,a.state.parentLecture.id),a.setState({recentlyClosedId:a.convertQuestionIndexToId(a.state.currentQuestionIndex),recentlyOpenedId:0}),a.state.currentQuestionIndex+1>=a.state.parentLecture.questions.length?a.setState({btnStatus:3,openQuestionId:0}):a.setState({btnStatus:2,openQuestionId:0});break;case 2:a.apiProfService.openQuestion(a.convertQuestionIndexToId(a.state.currentQuestionIndex+1),a.state.parentLecture.id),rs.emit("subscribe professor",a.convertQuestionIndexToId(a.state.currentQuestionIndex+1)),a.setState({recentlyOpenedId:a.convertQuestionIndexToId(a.state.currentQuestionIndex+1),recentlyClosedId:0}),a.setState({btnStatus:1,currentQuestionIndex:a.state.currentQuestionIndex+1,currentQuestionId:a.convertQuestionIndexToId(a.state.currentQuestionIndex+1),openQuestionId:a.convertQuestionIndexToId(a.state.currentQuestionIndex+1)})}},a.handleListClick=function(e){a.setState({btnStatus:1,currentQuestionIndex:a.convertQuestionIdToIndex(e),currentQuestionId:e,openQuestionId:e})},a.handleListClickClose=function(e){a.state.currentQuestionIndex+1>=a.state.parentLecture.questions.length?a.setState({btnStatus:3,openQuestionId:0,recentlyOpenedId:0}):a.setState({btnStatus:2,openQuestionId:0,recentlyOpenedId:0})},a.styles=e.classes,a.lectureId=null,a.state={currentQuestionIndex:0,currentQuestionId:0,openQuestionId:0,recentlyClosedId:0,recentlyOpenedId:0,btnStatus:0,parentLecture:{questions:[],title:""},editDeleteMode:!1,updateMCQStats:!1},a.profStore=e.profStore,a.apiProfService=e.apiService,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.profStore.dataLoaded){var t=this.props.match.params.lectureId;this.lectureId=t,void 0!==this.profStore.getLectureWithId(t)&&(this.setState({parentLecture:this.profStore.getLectureWithId(t)}),this.setState({currentQuestionId:this.convertQuestionIndexToId(this.state.currentQuestionIndex)}))}else this.apiProfService.loadData().then(function(){var t=e.props.match.params.lectureId;e.lectureId=t,void 0!==e.profStore.getLectureWithId(t)&&(e.setState({parentLecture:e.profStore.getLectureWithId(t)}),e.setState({currentQuestionId:e.convertQuestionIndexToId(e.state.currentQuestionIndex)}))})}},{key:"componentDidUpdate",value:function(){if(this.props.match.params.lectureId!==this.state.parentLecture.id)if(this.state.parentLecture.questions.length>0){this.apiProfService.closeAllQuestions(this.state.parentLecture.id);var e=this.props.match.params.lectureId;this.lectureId=e,this.setState({parentLecture:this.profStore.getLectureWithId(e),currentQuestionIndex:0,currentQuestionId:this.convertQuestionIndexToId(0),openQuestionId:0,recentlyClosedId:0,recentlyOpenedId:0,btnStatus:0,editDeleteMode:!1,updateMCQStats:!1})}else{var t=this.props.match.params.lectureId;this.lectureId=t,void 0!==this.profStore.getLectureWithId(t)&&(this.setState({parentLecture:this.profStore.getLectureWithId(t)}),this.setState({currentQuestionId:this.convertQuestionIndexToId(this.state.currentQuestionIndex)}))}this.state.currentQuestionId!==this.convertQuestionIndexToId(this.state.currentQuestionIndex)&&this.setState({currentQuestionId:this.convertQuestionIndexToId(this.state.currentQuestionIndex)})}},{key:"componentWillUnmount",value:function(){this.apiProfService.closeAllQuestions(this.lectureId)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.root,elevation:1},s.a.createElement(M.a,{variant:"h6",component:"h6",className:this.styles.text},this.state.parentLecture.title," on ",this.state.parentLecture.date),s.a.createElement(W.a,{in:this.state.parentLecture.scheduled},s.a.createElement(M.a,{variant:"h6",component:"h6",className:this.styles.text,align:"right"},"Questions available from ",this.state.parentLecture.open_date," to ",this.state.parentLecture.close_date)),s.a.createElement(M.a,{variant:"h4",component:"h4",className:this.styles.textQ,align:"center"},"Q",this.convertQuestionIdToIndex(this.state.currentQuestionId)+1,": ",this.profStore.getQuestionWithId(this.state.parentLecture,this.state.currentQuestionId).question_title),s.a.createElement(W.a,{in:this.profStore.getQuestionWithId(this.state.parentLecture,this.state.currentQuestionId).question_image},s.a.createElement(N.a,{item:!0,align:"center"},s.a.createElement("img",{src:this.profStore.getQuestionWithId(this.state.parentLecture,this.state.currentQuestionId).question_image,alt:"Preview Unavailable",height:300}))),s.a.createElement(W.a,{in:!this.state.parentLecture.scheduled},s.a.createElement(Ne.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleBtnClick()},className:this.styles.startLectureBtn,disabled:3===this.state.btnStatus||0===this.state.parentLecture.questions.length||this.state.editDeleteMode},0===this.state.btnStatus?"Open Question "+(this.convertQuestionIdToIndex(this.state.currentQuestionId)+1):1===this.state.btnStatus?"Close Question "+(this.convertQuestionIdToIndex(this.state.currentQuestionId)+1):2===this.state.btnStatus?"Open Question "+(this.convertQuestionIdToIndex(this.state.currentQuestionId)+2):"No More Questions"))),s.a.createElement(N.a,{container:!0,spacing:24,className:this.styles.grid},s.a.createElement(N.a,{item:!0,xs:12,md:8},s.a.createElement(ss,{handleListClose:this.handleListClickClose,handleClick:this.handleListClick,profStore:this.profStore,apiProfService:this.apiProfService,parentLecture:this.state.parentLecture,parentLectureId:this.props.match.params.lectureId,handleFinalDeletion:this.handleFinalDeletion,recentlyClosedId:this.state.recentlyClosedId,recentlyOpenedId:this.state.recentlyOpenedId,selectedQuestionId:this.state.openQuestionId,disableTopButton:this.disableTopButton,restoreTopButton:this.restoreTopButton,mcqEditDetect:this.mcqEditDetect})),s.a.createElement(N.a,{item:!0,xs:12,sm:9,md:4},s.a.createElement(O.a,null,this.state.parentLecture.questions.map(function(t,a){return"multiple_choice"===t.question_type?s.a.createElement(en,{key:a,parentLecture:e.state.parentLecture,selectedQuestionId:t.id,updateMCQStats:e.state.updateMCQStats,mcqStatsUpdated:e.mcqStatsUpdated}):"free_text"===t.question_type?s.a.createElement(hn,{key:a,parentLecture:e.state.parentLecture,selectedQuestionId:t.id}):"slider"===t.question_type?s.a.createElement(fn,{key:a,parentLecture:e.state.parentLecture,selectedQuestionId:t.id}):null})))))}},{key:"getSortedQuestionsCopy",value:function(){return this.profStore.getLectureWithId(this.props.match.params.lectureId).questions.slice().sort(function(e,t){return e.created_at<t.created_at?-1:e.created_at>t.created_at?1:0})}},{key:"convertQuestionIndexToId",value:function(e){return e<this.profStore.getLectureWithId(this.props.match.params.lectureId).questions.length?this.getSortedQuestionsCopy()[e].id:0}},{key:"convertQuestionIdToIndex",value:function(e){for(var t=this.getSortedQuestionsCopy(),a=0;a<t.length;a++)if(t[a].id===e)return a;return 0}}]),t}(s.a.Component))||Pn)||Pn)||Pn,os=Object(y.withStyles)(function(e){return{root:Object(aa.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:7*e.spacing.unit,backgroundColor:e.palette.secondary.main}),grid:{paddingTop:2*e.spacing.unit},text:{color:"#ffffff"},textQ:{color:"#ffffff",paddingTop:2*e.spacing.unit,paddingRight:10*e.spacing.unit,paddingLeft:10*e.spacing.unit,paddingBottom:2*e.spacing.unit},startLectureBtn:{float:"right"},showCodeBtn:{float:"left"}}})(is);function ls(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return cs(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cs(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw r}}}}function cs(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function us(e){if(0===e.length)return!1;var t,a=ls(e);try{for(a.s();!(t=a.n()).done;)for(var n=t.value,s=0,r=Object.values(n);s<r.length;s++){if(""===r[s].replace(/^\s+|\s+$/g,""))return!1}}catch(i){a.e(i)}finally{a.f()}return!0}var ds,ps,hs,ms,fs,bs,gs,ys,vs,Es,ws,Ss,_s,Os,Cs,js=Object(g.b)("profStore")(Vn=Object(g.b)("apiService")(Vn=Object(g.c)(Vn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toQuestions:!1,title:"",correct_answer:"",number_of_options:"",question_image_string:"",options:[],answer_choices:{option1:"",option2:"",option3:"",option4:"",option5:""},checked:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},should_delete:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},titleError:"",formValid:!1,titleValid:!0,hasAnswers:!1,optionsValid:!1,delete_mode:!1,deleteDisabled:!1,deleteConfirmDisabled:!1,uploading:!1},a.handleOption=function(e){return function(t){var n=Object.keys(e)[0],s=a.state.answer_choices,r=a.state.options;s[n]=t.target.value,r.find(function(e){return Object.keys(e)[0]===n})[n]=t.target.value,a.setState({answer_choices:s,options:r},function(){a.validateFields("answer_choices",r)})}},a.handleSetNumberOfOptions=function(e){return function(t){for(var n=[],s=a.state.answer_choices,r=t.target.value<=2,i=1;i<=t.target.value;i++){var o="option"+i.toString();n.push(Object(b.a)({},o,a.state.answer_choices[o]))}if(t.target.value<a.state.number_of_options)for(var l=t.target.value+1;l<=5;l++){s["option"+l.toString()]=""}a.setState({answer_choices:s,number_of_options:t.target.value,options:n,deleteDisabled:r},function(){a.validateFields(e,n)})}},a.handleDeleteQueue=function(e){return function(t){var n=a.state.should_delete;t.target.checked?n[e]=!0:n[e]=!1;for(var s=0,r=0,i=Object.keys(n);r<i.length;r++){n[i[r]]||s++}s-=5-a.state.number_of_options,a.setState({should_delete:n,deleteConfirmDisabled:s<2})}},a.handleCheck=function(e){return function(t){var n=Object.keys(e)[0],s=a.state.checked,r=n;s[n]=t.target.checked,a.state.correct_answer===n&&(s[n]=!1,r=""),a.setState({correct_answer:r,checked:s})}},a.handleChange=function(e){return function(t){var n=t.target.value;a.setState(Object(b.a)({},e,n),function(){a.validateFields(e,n)})}},a.encodeImageFileAsURL=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){console.log("RESULT",n.result),a.setState({question_image_string:n.result})},n.onloadend=n.onloadend.bind(Object(ca.a)(Object(ca.a)(a))),n.readAsDataURL(t)},a.handleSubmit=function(e){if(e.preventDefault(),a.state.formValid){var t=a.props.match.params.lectureId;""!==a.state.correct_answer&&null!==a.state.correct_answer&&a.state.correct_answer.substring(6,7),a.props.apiService.addQuestion(new wn(null,t,"multiple_choice",a.state.title,a.state.question_image_string,a.state.correct_answer,null,null,null,null,null,null,null,a.state.answer_choices.option1,a.state.answer_choices.option2,a.state.answer_choices.option3,a.state.answer_choices.option4,a.state.answer_choices.option5,a.state.number_of_options)),a.setState({toQuestions:!0})}},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setAnswerObject",value:function(e){for(var t={},a=1;a<=e;a++){t["option"+a.toString()]=""}return t}},{key:"setCheckedObject",value:function(e){for(var t={},a=1;a<=e;a++){t["option"+a.toString()]=!1}return t}},{key:"handleDelete",value:function(){for(var e=this,t=this.state.answer_choices,a=this.state.number_of_options,n=[],s="",r={option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},i=0,o=Object.keys(this.state.should_delete);i<o.length;i++){var l=o[i];this.state.should_delete[l]&&a--}if(a<2)this.setState({should_delete:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},delete_mode:!1});else{for(var c=1,u=0,d=Object.keys(t);u<d.length;u++){var p=d[u];if(!this.state.should_delete[p]){var h="option"+c.toString();if(n.push(Object(b.a)({},h,t[p])),p===this.state.correct_answer&&(s=h),++c>a)break}}t={option1:"",option2:"",option3:"",option4:"",option5:""},n.map(function(e){return t[Object.keys(e)[0]]=Object.values(e)[0]}),""!==s&&(r[s]=!0),this.setState({should_delete:{option1:!1,option2:!1,option3:!1,option4:!1,option5:!1},answer_choices:t,correct_answer:s,checked:r,number_of_options:a,delete_mode:!1,options:n,deleteDisabled:a<=2},function(){e.validateFields("answer_choices",n)})}}},{key:"validateFields",value:function(e,t){var a=this.state.titleValid,n=this.state.errors,s=this.state.hasAnswers,r=this.state.optionsValid,i=this.state.titleError;switch(e){case"title":""===t.replace(/^\s+|\s+$/g,"")?(i="This field is required",a=!1):(i="",a=!0);break;case"number_of_options":s=!0,r=us(t);break;case"answer_choices":r=us(t)}this.setState({errors:n,titleValid:a,titleError:i,hasAnswers:s,optionsValid:r},this.validateForm)}},{key:"validateForm",value:function(){var e=""!==this.state.title;e||this.setState({titleValid:!1}),this.setState({formValid:e&&this.state.hasAnswers&&this.state.optionsValid})}},{key:"setDeleteMode",value:function(){var e=!this.state.delete_mode;this.setState({delete_mode:e})}},{key:"render",value:function(){var e=this,t=this.props.match.params.lectureId;return!0===this.state.toQuestions?s.a.createElement(se.a,{to:"/professor/"+t+"/questions",push:!0}):s.a.createElement(N.a,{container:!0,direction:"column",justify:"center",className:this.styles.paper},s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(M.a,{variant:"h3",color:"textPrimary"},"Add New Question:")),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("form",{className:this.styles.container,onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},s.a.createElement(it.a,{fullWidth:!0,required:!0,error:!this.state.titleValid,id:"standard-name",label:"Question Title",value:this.state.title,onChange:this.handleChange("title"),margin:"normal",helperText:this.state.titleError}))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("form",{autoComplete:"off"},s.a.createElement($e.a,null,s.a.createElement(kn.a,{htmlFor:"number-options"},"number of answer choices"),s.a.createElement(qn.a,{value:this.state.number_of_options,onChange:this.handleSetNumberOfOptions("number_of_options"),className:this.styles.select,disabled:this.state.delete_mode,inputProps:{name:"number_of_options",id:"number-options"}},s.a.createElement(le.a,{value:2},"2"),s.a.createElement(le.a,{value:3},"3"),s.a.createElement(le.a,{value:4},"4"),s.a.createElement(le.a,{value:5},"5"))))),this.state.hasAnswers&&s.a.createElement(N.a,{item:!0},s.a.createElement(an.a,null,s.a.createElement(cn.a,null,s.a.createElement(dn.a,null,this.state.delete_mode?s.a.createElement(on.a,null," Delete?"):s.a.createElement(on.a,null,"Correct Answer?"),s.a.createElement(on.a,null,"Answer Choices"))),s.a.createElement(sn.a,null,this.state.delete_mode?this.state.options.map(function(t,a){return s.a.createElement(dn.a,{key:a},s.a.createElement(on.a,null,s.a.createElement(Nt.a,{checked:e.state.should_delete[Object.keys(t)[0]],onChange:e.handleDeleteQueue(Object.keys(t)[0]),value:Object.keys(t)[0]})),s.a.createElement(on.a,{align:"right"},s.a.createElement(M.a,{variant:"body1",align:"justify"}," ",e.state.answer_choices[Object.keys(t)[0]])))}):this.state.options.map(function(t,a){return s.a.createElement(dn.a,{key:a},s.a.createElement(on.a,null,s.a.createElement(Nt.a,{checked:e.state.correct_answer===Object.keys(t)[0],onChange:e.handleCheck(t),value:Object.keys(t)[0]})),s.a.createElement(on.a,{align:"right"},s.a.createElement($e.a,null,s.a.createElement(He.a,{multiline:!0,id:"bootstrap-input",name:Object.keys(t)[0],value:e.state.answer_choices[Object.keys(t)[0]],onChange:e.handleOption(t),classes:{input:e.styles.bootstrapInput}}))))}))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},this.state.delete_mode?s.a.createElement($.a,{color:"secondary",onClick:this.handleDelete.bind(this),disabled:this.state.deleteConfirmDisabled},s.a.createElement(Be.a,{className:this.styles.iconDone})):s.a.createElement($.a,{onClick:this.setDeleteMode.bind(this),color:"secondary",disabled:this.state.deleteDisabled},s.a.createElement(Bt.a,null)))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(Ne.a,{variant:"contained",component:"label"},"Upload Image",s.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.encodeImageFileAsURL}))),s.a.createElement(W.a,{in:this.state.question_image_string,timeout:"auto",unmountOnExit:!0},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Image Preview"),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("img",{src:this.state.question_image_string,height:300,alt:"Preview Unavailable"}))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(N.a,{container:!0,direction:"row",className:this.styles.buttonContainer},s.a.createElement("form",null,s.a.createElement(Ne.a,{type:"submit",disabled:!this.state.formValid,variant:"outlined",color:"primary",onClick:this.handleSubmit},"Submit")))))}}]),t}(s.a.Component))||Vn)||Vn)||Vn,ks=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:60*e.spacing.unit},select:{width:60*e.spacing.unit},icon:{margin:e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},item:{paddingBottom:4*e.spacing.unit},buttonContainer:{paddingTop:2*e.spacing.unit},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",fontSize:12,padding:"10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}})(js),Is=Object(g.b)("profStore")(ds=Object(g.b)("apiService")(ds=Object(g.c)(ds=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toQuestions:!1,title:"",correct_answer:"",error:"",titleValid:!1,correct_answer_valid:!0,question_image_string:""},a.handleChange=function(e){return function(t){var n=t.target.value;a.setState(Object(b.a)({},e,n),function(){a.handleValidation(e,n)})}},a.encodeImageFileAsURL=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){console.log("RESULT",n.result),a.setState({question_image_string:n.result})},n.onloadend=n.onloadend.bind(Object(ca.a)(Object(ca.a)(a))),n.readAsDataURL(t)},a.handleSubmit=function(e){if(e.preventDefault(),a.state.titleValid){var t=a.props.match.params.lectureId;a.props.apiService.addQuestion(new _n(null,t,"free_text",a.state.title,a.state.question_image_string,a.state.correct_answer,null,null,null,null,null,null,null,"")),a.setState({toQuestions:!0})}},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleValidation",value:function(e,t){switch(e){case"title":""===this.state.title.replace(/^\s+|\s+$/g,"")?this.setState({error:"This field is required",titleValid:!1}):this.setState({error:"",titleValid:!0});break;case"correct_answer":""!==this.state.correct_answer?""===this.state.correct_answer.replace(/^\s+|\s+$/g,"")?this.setState({correct_answer_valid:!1}):this.setState({correct_answer_valid:!0}):this.state.correct_answer_valid||this.setState({correct_answer_valid:!0})}}},{key:"render",value:function(){var e=this.props.match.params.lectureId;return!0===this.state.toQuestions?s.a.createElement(se.a,{to:"/professor/"+e+"/questions",push:!0}):s.a.createElement("div",{className:this.styles.paper},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Add New Question:"),s.a.createElement("form",{className:this.styles.container,onSubmit:this.handleSubmit,noValidate:!0,autoComplete:"off"},s.a.createElement(N.a,{container:!0,direction:"column"},s.a.createElement(it.a,{required:!0,error:!this.state.titleValid&&!(""===this.state.error),label:"Question Title",className:this.styles.textField,value:this.state.title,onChange:this.handleChange("title"),margin:"normal",helperText:this.state.error}),s.a.createElement(it.a,{label:"Correct Answer",className:this.styles.textField,value:this.state.correct_answer,onChange:this.handleChange("correct_answer"),margin:"normal"}),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(Ne.a,{variant:"contained",component:"label"},"Upload Image",s.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.encodeImageFileAsURL}))),s.a.createElement(W.a,{in:this.state.question_image_string,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Image Preview")),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement("img",{src:this.state.question_image_string,height:300,alt:"Preview Unavailable"}))),s.a.createElement(N.a,{item:!0,className:this.styles.item},s.a.createElement(Ne.a,{type:"submit",disabled:!this.state.titleValid||!this.state.correct_answer_valid,variant:"outlined",color:"primary",onClick:this.handleSubmit},"Submit")))))}}]),t}(s.a.Component))||ds)||ds)||ds,qs=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},item:{paddingBottom:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:400}}})(Is),xs=a(108),Qs=a.n(xs),Ls=[{value:"=",label:"="},{value:"<",label:"<"},{value:">",label:">"},{value:"<=",label:"<="},{value:">=",label:">="}],Ns=[{value:"<",label:"<"},{value:">",label:">"},{value:"<=",label:"<="},{value:">=",label:">="}],Ds=Object(g.b)("profStore")(ps=Object(g.b)("apiService")(ps=Object(g.c)(ps=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toQuestions:!1,title:"",titleError:"",correct_answer:"",labels:{lower:"0%",upper:"100%"},answer_bounds:{upper:"",lower:""},range:!1,rangeVal:"not_range",equality_operators:{upper:"",lower:""},slider_value:50,has_correct_answer:!1,custom_labels:!1,question_image_string:"",fieldsValid:{title:!1,lower_label:!1,upper_label:!1,lower_bound:!1,upper_bound:!1,equality_operators:!1},disabled:!0},a.setCorrectAnswer=function(e){return function(t){t.target.checked||a.setState({answer_bounds:{upper:"",lower:""},equality_operators:{upper:"",lower:""},range:!1,rangeVal:"not_range"}),a.setState(Object(b.a)({},e,t.target.checked),function(){a.validateBoundsAndOperators()})}},a.setCustomLabels=function(e){return function(t){if(!t.target.checked){var n=a.state.fieldsValid;n.lower_label=!0,n.upper_label=!0,a.setState({fieldsValid:n,labels:{upper:"100%",lower:"0%"},custom_labels:!1})}a.setState(Object(b.a)({},e,t.target.checked)),a.validateAnswers()}},a.setCorrectBounds=function(e){return function(t){var n=a.state.answer_bounds,s=t.target.value;n[e]=s,s<0&&(s=0),s>100&&(s=100),Number.isInteger(s)||(s=Math.round(s)),a.setState({answer_bounds:n},function(){a.validateBoundsAndOperators()})}},a.handleEqualityOperator=function(e){return function(t){var n=a.state.equality_operators;n[e]=t.target.value,a.setState({equality_operators:n},function(){a.validateBoundsAndOperators()})}},a.handleTitleChange=function(e){return function(e){var t=e.target.value;a.setState({title:t},function(){a.validateTitle(t)})}},a.handleLabelsChange=function(e){return function(t){var n=t.target.value,s=a.state.labels;s[e]=t.target.value,a.setState({labels:s},function(){a.handleLabelsValidation(e,n)})}},a.handleSliderChange=function(e,t){a.setState({slider_value:t})},a.handleSetRange=function(e){var t=!0;"not_range"===e.target.value&&(t=!1),a.setState({rangeVal:e.target.value,range:t})},a.encodeImageFileAsURL=function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(){console.log("RESULT",n.result),a.setState({question_image_string:n.result})},n.onloadend=n.onloadend.bind(Object(ca.a)(Object(ca.a)(a))),n.readAsDataURL(t)},a.handleSubmit=function(e){if(e.preventDefault(),!a.state.disabled){var t=a.props.match.params.lectureId,n="";if(a.state.has_correct_answer)if(a.state.range){var s=a.state.answer_bounds,r=a.state.equality_operators;if(Number(s.lower)>Number(s.upper)){var i=s.lower;s.lower=s.upper,s.upper=i;var o=a.state.equality_operators,l=a.state.equality_operators.lower;o.lower=o.upper,o.upper=l}n=r.lower+" "+s.lower.toString()+" "+a.getOperatorCondition(r.lower)+" "+r.upper+" "+s.upper.toString()}else n=a.state.equality_operators.lower+" "+a.state.answer_bounds.lower.toString();a.props.apiService.addQuestion(new Sn(null,t,"slider",a.state.title,a.state.question_image_string,n,null,null,null,null,null,null,null,a.state.labels.lower,a.state.labels.upper)),a.setState({toQuestions:!0})}},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"validateAnswers",value:function(){var e=!1;if(this.state.custom_labels&&this.state.has_correct_answer)for(var t=0,a=Object.keys(this.state.fieldsValid);t<a.length;t++){var n=a[t];this.state.fieldsValid[n]||(e=!0)}else this.state.custom_labels?this.state.fieldsValid.lower_label&&this.state.fieldsValid.upper_label&&this.state.fieldsValid.title||(e=!0):this.state.has_correct_answer?this.state.fieldsValid.lower_bound&&this.state.fieldsValid.upper_bound&&this.state.fieldsValid.equality_operators||(e=!0):this.state.fieldsValid.title||(e=!0);this.state.fieldsValid.title||(e=!0),this.setState({disabled:e})}},{key:"getOppBound",value:function(e){return"upper_bound"===e?"lower_bound":"upper_bound"}},{key:"getOppSide",value:function(e){return"upper"===e?"lower":"upper"}},{key:"isInRange",value:function(e,t){return""!==e.replace(/^\s+|\s+$/g,"")&&(""!==t.replace(/^\s+|\s+$/g,"")&&(("<"!==e||"0"!==t)&&(">"!==e||"100"!==t)))}},{key:"validateBoundsAndOperators",value:function(){var e=this,t=!0,a=this.state.fieldsValid;if(this.isInRange(this.state.equality_operators.lower,this.state.answer_bounds.lower)||(a.equality_operators=!1,a.lower_bound=!1,t=!1),this.state.range){this.isInRange(this.state.equality_operators.upper,this.state.answer_bounds.upper)||(a.equality_operators=!1,a.upper_bound=!1,t=!1),this.state.answer_bounds.lower===this.state.answer_bounds.upper&&(a.equality_operators=!1,a.lower_bound=!1,t=!1);var n=!0;switch(this.state.equality_operators.lower){case">":case">=":n=">"!==this.state.equality_operators.upper&&">="!==this.state.equality_operators.upper;break;case"<":case"<=":n="<"!==this.state.equality_operators.upper&&"<="!==this.state.equality_operators.upper;break;default:n=!0}a.equality_operators=n&&a.equality_operators,n||(t=!1)}t&&(a={title:this.state.fieldsValid.title,lower_label:!0,upper_label:!0,lower_bound:!0,upper_bound:!0,equality_operators:!0}),this.setState({fieldsValid:a},function(){e.validateAnswers()})}},{key:"validateTitle",value:function(e){var t=this.state.titleError,a=this.state.fieldsValid;""===e.replace(/^\s+|\s+$/g,"")?(t="Required",a.title=!1):(t="",a.title=!0),this.setState({titleError:t,fieldsValid:a}),this.validateAnswers()}},{key:"handleLabelsValidation",value:function(){var e=!1;""!==this.state.labels.upper.replace(/^\s+|\s+$/g,"")&&""!==this.state.labels.lower.replace(/^\s+|\s+$/g,"")&&(e=!0);var t=this.state.fieldsValid;t.lower_label=e,t.upper_label=e,this.setState({fieldsValid:t}),this.validateAnswers()}},{key:"getOperatorCondition",value:function(e){var t=!0;switch(e){case"<":case"<=":t="||";break;case">":case">=":t="&&";break;default:t=!0}return t}},{key:"render",value:function(){var e=this.props.match.params.lectureId;return!0===this.state.toQuestions?s.a.createElement(se.a,{to:"/professor/"+e+"/questions",push:!0}):s.a.createElement(N.a,{container:!0,justify:"center",className:this.styles.container,spacing:24},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem,xs:12,sm:6},s.a.createElement(N.a,{container:!0,direction:"column","align-items":"flex-start"},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Add New Question:")),s.a.createElement(N.a,{item:!0,className:this.styles.entry},s.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit},s.a.createElement(it.a,{required:!0,fullWidth:!0,error:""!==this.state.titleError,id:"standard-name",label:"Question Title",value:this.state.title,onChange:this.handleTitleChange("title"),margin:"normal",helperText:this.state.titleError}))),s.a.createElement(N.a,{item:!0},s.a.createElement(Ne.a,{variant:"contained",component:"label"},"Upload Image",s.a.createElement("input",{type:"file",style:{display:"none"},onChange:this.encodeImageFileAsURL})))),s.a.createElement(N.a,{container:!0,direction:"column",justify:"flex-start"},s.a.createElement(N.a,{item:!0},s.a.createElement(Pt.a,{control:s.a.createElement(Rn.a,{checked:this.state.custom_labels,onChange:this.setCustomLabels("custom_labels"),value:this.state.custom_labels}),label:"custom labels (optional)"})),this.state.custom_labels&&s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",spacing:24,className:this.styles.entry},s.a.createElement(N.a,{item:!0,xs:12,sm:6},s.a.createElement(it.a,{fullWidth:!0,id:"standard-name",label:"lower label",value:this.state.labels.lower,onChange:this.handleLabelsChange("lower"),margin:"normal"})),s.a.createElement(N.a,{item:!0,xs:12,sm:6},s.a.createElement(it.a,{fullWidth:!0,id:"standard-name",label:"upper label",value:this.state.labels.upper,onChange:this.handleLabelsChange("upper"),margin:"normal"}))))),s.a.createElement(N.a,{container:!0,direction:"column",justify:"space-evenly"},s.a.createElement(N.a,{item:!0},s.a.createElement(Pt.a,{control:s.a.createElement(Rn.a,{checked:this.state.has_correct_answer,onChange:this.setCorrectAnswer("has_correct_answer"),value:this.state.has_correct_answer}),label:"set correct answer (optional)"})),this.state.has_correct_answer&&s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement($e.a,{component:"fieldset"},s.a.createElement(Gn.a,{name:"rangeVal",value:this.state.rangeVal,onChange:this.handleSetRange},s.a.createElement(Pt.a,{value:"not_range",name:"not_range",control:s.a.createElement(Yn.a,null),label:"inequality/equality"}),s.a.createElement(Pt.a,{value:"range",name:"range",control:s.a.createElement(Yn.a,null),label:"set range"}))))),this.state.has_correct_answer&&this.state.range?s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",className:this.styles.entry,spacing:16},s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{select:!0,value:this.state.equality_operators.lower,onChange:this.handleEqualityOperator("lower"),InputProps:{startAdornment:s.a.createElement(Un.a,{position:"start"},"answer")}},Ns.map(function(e){return s.a.createElement(le.a,{key:e.value,value:e.value},e.label)}))),s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{id:"correct answer lower bound",type:"number",value:this.state.answer_bounds.lower,onChange:this.setCorrectBounds("lower"),InputProps:{endAdornment:s.a.createElement(Un.a,{variant:"filled",position:"end"},"%")}})),s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{select:!0,value:this.state.equality_operators.upper,onChange:this.handleEqualityOperator("upper"),InputProps:{startAdornment:s.a.createElement(Un.a,{position:"start"},"and/or")}},Ns.map(function(e){return s.a.createElement(le.a,{key:e.value,value:e.value},e.label)}))),s.a.createElement(N.a,{item:!0,xs:6,sm:3},s.a.createElement(it.a,{id:"correct answer upper bound",type:"number",value:this.state.answer_bounds.upper,onChange:this.setCorrectBounds("upper"),InputProps:{endAdornment:s.a.createElement(Un.a,{variant:"filled",position:"end"},"%")}})))):this.state.has_correct_answer&&s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",className:this.styles.entry},s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",spacing:24},s.a.createElement(N.a,{item:!0,xs:6},s.a.createElement(it.a,{select:!0,fullWidth:!0,value:this.state.equality_operators.lower,onChange:this.handleEqualityOperator("lower"),InputProps:{startAdornment:s.a.createElement(Un.a,{position:"start"},"answer")}},Ls.map(function(e){return s.a.createElement(le.a,{key:e.value,value:e.value},e.label)}))),s.a.createElement(N.a,{item:!0,xs:6},s.a.createElement(it.a,{fullWidth:!0,id:"correct answer lower bound",type:"number",value:this.state.answer_bounds.lower,onChange:this.setCorrectBounds("lower"),InputProps:{endAdornment:s.a.createElement(Un.a,{variant:"filled",position:"end"},"%")}}))))))),s.a.createElement(N.a,{container:!0,className:this.styles.button},s.a.createElement(Ne.a,{disabled:this.state.disabled,variant:"outlined",color:"primary",type:"submit",onClick:this.handleSubmit},"Submit"))),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem,xs:12,sm:6},s.a.createElement(N.a,{container:!0,direction:"column","align-items":"flex-start",spacing:24},s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"}," Preview: ")),s.a.createElement(W.a,{in:this.state.question_image_string,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{item:!0,align:"center"},s.a.createElement("img",{src:this.state.question_image_string,height:300,alt:"Preview Unavailable"}))),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"column",justify:"center",spacing:24},s.a.createElement(N.a,{item:!0,xs:12},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",className:this.styles.titleContainer},s.a.createElement(N.a,{item:!0},s.a.createElement("div",{className:this.styles.titleWrap}," ",this.state.title," ")),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(Te.a,{className:this.styles.card},s.a.createElement(M.a,{align:"center",className:this.styles.percentText},this.state.slider_value.toString()+" ","%")))))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",className:this.styles.slidercontainer,spacing:24},s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement("div",{className:this.styles.labels},this.state.labels.lower)),s.a.createElement(N.a,{item:!0,xs:8},s.a.createElement(Qs.a,{value:this.state.slider_value,min:0,max:100,step:1,"aria-labelledby":"label",onChange:this.handleSliderChange})),s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement("div",{className:this.styles.labels},this.state.labels.upper))))))))}}]),t}(s.a.Component))||ps)||ps)||ps,Ts=Object(y.withStyles)(function(e){return{gridItem:{padding:e.spacing.unit},card:{backgroundColor:e.palette.secondary.main,padding:.25*e.spacing.unit,marginRight:2.5*e.spacing.unit,width:45},percentText:{color:"white"},labels:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"0.75em",display:"flex",justifyContent:"center"},titleWrap:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"1.5em",display:"flex"},entry:{maxWidth:500},titleContainer:{paddingTop:e.spacing.unit,paddingBottom:2*e.spacing.unit},slidercontainer:{paddingRight:2*e.spacing.unit},gridContainer:{margin:e.spacing.unit},container:{flexWrap:"wrap"},button:{paddingTop:3*e.spacing.unit},andor:{padding:e.spacing.unit,width:"15%"}}})(Ds),As=Object(g.b)("profStore")(hs=Object(g.b)("apiService")(hs=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).modifyDate=function(e){return e.setUTCDate(e.getDate()),e.setUTCHours(12),e.setUTCMinutes(0),e.setUTCMinutes(0),e},a.handleDateChange=function(e){e=a.modifyDate(e),a.setState({selectedDate:e})},a.handleOpenDateChange=function(e){e=a.modifyDate(e),a.setState({openDate:e},function(){a.handleValidation()})},a.handleCloseDateChange=function(e){e=a.modifyDate(e),a.setState({closeDate:e},function(){a.handleValidation()})},a.handleChange=function(e){var t=e.target,n=t.name,s=t.value;a.setState(Object(b.a)({},n,s),function(){a.handleValidation()})},a.handleCheck=function(e){var t=e.target,n=t.name,s=t.checked;a.setState(Object(b.a)({},n,s),function(){a.handleValidation()})},a.handleSubmit=function(){a.props.apiService.addLecture(new ke(a.state.title,a.state.selectedDate,null,a.state.courseId,null,a.state.scheduled,a.state.openDate,a.state.closeDate)),a.setState({toLecture:!0})},fa.a.prototype.getStartOfMonth=fa.a.prototype.startOfMonth,a.styles=e.classes,a.profStore=e.profStore,a.courseId=a.props.match.params.courseId;var n=new Date;return a.state={toLecture:!1,title:"Lecture ",courseId:a.courseId,scheduled:!1,numLects:a.props.location.state.numLects.toString(),errors:{title:""},titleValid:!0,formValid:!1,selectedDate:n,dateValid:!0,openDate:n,closeDate:n},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e="Lecture "+this.state.numLects.toString();this.setState({title:e}),this.handleValidation()}},{key:"handleValidation",value:function(){var e=this.state.titleValid,t=this.state.dateValid,a=this.state.errors;""===this.state.title?(a.title="This field is required.",e=!1):e=!0,this.state.scheduled&&(t=this.state.closeDate.getTime()>=this.state.openDate.getTime()),this.setState({titleValid:e,dateValid:t},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.titleValid&&this.state.dateValid})}},{key:"render",value:function(){return!0===this.state.toLecture?s.a.createElement(se.a,{to:"/professor/"+this.state.courseId+"/lectures",push:!0}):s.a.createElement("div",{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column"},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(M.a,{variant:"h6",color:"textPrimary"},"Add New Lecture:")),s.a.createElement("form",{noValidate:!0,autoComplete:"off"},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(it.a,{requiredtitle:"true",error:!this.state.titleValid,name:"title",label:"Lecture Title",className:this.styles.textField,value:this.state.title,onChange:this.handleChange,margin:"normal",helperText:this.state.errors.title,multiline:!0})),s.a.createElement(ma.b,{utils:ha.a},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(ma.a,{margin:"normal",label:"Lecture Date",name:"selectedDate",value:this.state.selectedDate,onChange:this.handleDateChange,className:this.styles.dateField}))),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(N.a,{container:!0,direction:"row",alignItems:"center"},s.a.createElement(N.a,{item:!0},s.a.createElement(Nt.a,{checked:this.state.scheduled,onChange:this.handleCheck,name:"scheduled"})),s.a.createElement(N.a,{item:!0},s.a.createElement(M.a,{variant:"body2",color:"textPrimary"},"Schedule the Lecture to Open and Close at Specific Dates")))),s.a.createElement(W.a,{in:this.state.scheduled,timeout:"auto",unmountOnExit:!0},s.a.createElement(ma.b,{utils:ha.a},s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(ma.a,{margin:"normal",label:"Start Date",name:"openDate",value:this.state.openDate,onChange:this.handleOpenDateChange,className:this.styles.dateField})),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(ma.a,{margin:"normal",label:"End Date",name:"closeDate",value:this.state.closeDate,onChange:this.handleCloseDateChange,className:this.styles.dateField}))))),s.a.createElement(N.a,{item:!0,className:this.styles.gridItemButton},s.a.createElement(Ne.a,{disabled:!this.state.formValid,variant:"outlined",color:"primary",className:this.styles.container,onClick:this.handleSubmit},"Submit")))))}}]),t}(s.a.Component))||hs)||hs,Ps=Object(y.withStyles)(function(e){return{paper:{position:"absolute",width:80*e.spacing.unit},container:{display:"flex",flexWrap:"wrap"},gridItem:{margin:e.spacing.unit},dateField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:30*e.spacing.unit},gridItemButton:{margin:2*e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:60*e.spacing.unit}}})(As),Vs=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(M.a,{variant:"h5"},"Woops! This page does not exist.")}}]),t}(s.a.Component),Ms=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.profStore=new Qe,a.apiProfService=new we(a.profStore),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.profStore.dataLoaded||this.apiProfService.loadData().then(function(){e.profStore.dataLoaded=!0})}},{key:"render",value:function(){return s.a.createElement(g.a,{profStore:this.profStore,apiService:this.apiProfService},s.a.createElement("div",null,s.a.createElement(E.a,null),s.a.createElement(f.a,{path:"/professor",component:_e}),s.a.createElement("nav",null,s.a.createElement(S.a,{xsDown:!0,implementation:"css"},s.a.createElement(f.a,{path:"/professor",component:J}))),s.a.createElement("main",{className:this.styles.content},s.a.createElement(m.a,null,s.a.createElement(f.a,{exact:!0,path:"/professor",component:la}),s.a.createElement(f.a,{path:"/professor/new",component:pa}),s.a.createElement(f.a,{path:"/professor/:courseId/lectures",component:Qa}),s.a.createElement(f.a,{path:"/professor/:courseId/new",component:Ps}),s.a.createElement(f.a,{exact:!0,path:"/professor/:lectureId/questions",component:os}),s.a.createElement(f.a,{path:"/professor/:lectureId/questions/new-mc",component:ks}),s.a.createElement(f.a,{path:"/professor/:lectureId/questions/new-free-text",component:qs}),s.a.createElement(f.a,{path:"/professor/:lectureId/questions/new-slider",component:Ts}),s.a.createElement(f.a,{component:Vs})))))}}]),t}(s.a.Component),Fs=Object(y.withStyles)(function(e){var t;return{content:(t={},Object(b.a)(t,e.breakpoints.up("sm"),{marginLeft:240}),Object(b.a)(t,"flexGrow",1),Object(b.a)(t,"padding",3*e.spacing.unit),t)}})(Ms),Ws=(ms=function(){function e(){Object(l.a)(this,e),Object(Oe.a)(this,"courses",fs,this),Object(Oe.a)(this,"questions",bs,this),Object(Oe.a)(this,"prevQuestions",gs,this),Object(Oe.a)(this,"lastQuestion",ys,this),Object(Oe.a)(this,"lastAnswer",vs,this),Object(Oe.a)(this,"socketIOStatus",Es,this)}return Object(c.a)(e,[{key:"setSocketIOStatus",value:function(e){this.socketIOStatus=e}},{key:"updateLastQuestion",value:function(e){this.lastQuestion=e}},{key:"resetQuestions",value:function(){this.questions=[],this.prevQuestions=[],this.lastAnswer=null,this.lastQuestion=null}},{key:"updateLastAnswer",value:function(e){this.lastAnswer=e}},{key:"updateAllCourses",value:function(e){var t=this;this.courses=[],e.forEach(function(e){e.num=e.coursenum,e.joinCode=e.enroll_code,t.courses.push(new ua(e))})}},{key:"dropCourse",value:function(e){this.courses.remove(this.courses.find(function(t){return t.id===e}))}},{key:"getQuestionWithId",value:function(e){return this.questions.find(function(t){return t.id===e})}},{key:"getPrevQuestionWithId",value:function(e){return this.prevQuestions.find(function(t){return t.id===e})}},{key:"updateQuestion",value:function(e){var t=this.questions.find(function(t){return t.id===e.id});"free_text"===e.question_type&&(t.id=e.id,t.lecture_id=e.lecture_id,t.question_type=e.question_type,t.question_title=e.question_title,t.correct_answer=e.correct_answer,t.creator_id=e.creator_id,t.is_open=e.is_open,t.opened_at=e.opened_at,t.closed_at=e.closed_at,t.created_at=e.created_at,t.modified_at=e.modified_at,t.answer=e.answer,t.word_limit=e.word_limit)}},{key:"updateAllQuestions",value:function(e){var t=this;this.questions=[],e.forEach(function(e){"multiple_choice"===e.question_type?t.questions.push(new wn(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.option1,e.option2,e.option3,e.option4,e.option5,e.number_of_options)):"free_text"===e.question_type?t.questions.push(new _n(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.word_limit)):t.questions.push(new Sn(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.lower_label,e.upper_label))})}},{key:"updateAllPrevQuestions",value:function(e){var t=this;this.prevQuestions=[],e.forEach(function(e){console.log(e.question_title),"multiple_choice"===e.question_type?t.prevQuestions.push(new wn(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.option1,e.option2,e.option3,e.option4,e.option5,e.number_of_options)):"free_text"===e.question_type?t.prevQuestions.push(new _n(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.word_limit)):t.prevQuestions.push(new Sn(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.lower_label,e.upper_label))})}},{key:"addOneQuestion",value:function(e){void 0===this.questions.find(function(t){return t.id===e.id})&&("multiple_choice"===e.question_type?this.questions.push(new wn(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.option1,e.option2,e.option3,e.option4,e.option5,e.number_of_options)):"free_text"===e.question_type?this.questions.push(new _n(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.word_limit)):this.questions.push(new Sn(e.id,e.lecture_id,e.question_type,e.question_title,e.question_image,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.lower_label,e.upper_label)))}},{key:"updateOneQuestion",value:function(e){var t,a=e.id,n=this.questions.find(function(e){return e.id===a}),s=this.questions.indexOf(n);s<=-1?this.addOneQuestion(e):(t="multiple_choice"===e.question_type?new wn(e.id,e.lecture_id,e.question_type,e.question_title,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.option1,e.option2,e.option3,e.option4,e.option5,e.number_of_options):"free_text"===e.question_type?new _n(e.id,e.lecture_id,e.question_type,e.question_title,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.word_limit):new Sn(e.id,e.lecture_id,e.question_type,e.question_title,e.correct_answer,e.creator_id,e.is_open,e.opened_at,e.closed_at,e.created_at,e.modified_at,e.answer,e.lower_label,e.upper_label),this.questions[s]=t)}},{key:"removeQuestionById",value:function(e){this.questions.remove(this.questions.find(function(t){return t.id===e}))}},{key:"getNumberOfQuestions",value:function(){return this.questions.length}}]),e}(),fs=Object(Ce.a)(ms.prototype,"courses",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bs=Object(Ce.a)(ms.prototype,"questions",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gs=Object(Ce.a)(ms.prototype,"prevQuestions",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ys=Object(Ce.a)(ms.prototype,"lastQuestion",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vs=Object(Ce.a)(ms.prototype,"lastAnswer",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Es=Object(Ce.a)(ms.prototype,"socketIOStatus",[je.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(Ce.a)(ms.prototype,"setSocketIOStatus",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"setSocketIOStatus"),ms.prototype),Object(Ce.a)(ms.prototype,"updateLastQuestion",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateLastQuestion"),ms.prototype),Object(Ce.a)(ms.prototype,"resetQuestions",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"resetQuestions"),ms.prototype),Object(Ce.a)(ms.prototype,"updateLastAnswer",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateLastAnswer"),ms.prototype),Object(Ce.a)(ms.prototype,"updateAllCourses",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateAllCourses"),ms.prototype),Object(Ce.a)(ms.prototype,"dropCourse",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"dropCourse"),ms.prototype),Object(Ce.a)(ms.prototype,"updateQuestion",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateQuestion"),ms.prototype),Object(Ce.a)(ms.prototype,"updateAllQuestions",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateAllQuestions"),ms.prototype),Object(Ce.a)(ms.prototype,"updateAllPrevQuestions",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateAllPrevQuestions"),ms.prototype),Object(Ce.a)(ms.prototype,"addOneQuestion",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"addOneQuestion"),ms.prototype),Object(Ce.a)(ms.prototype,"updateOneQuestion",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"updateOneQuestion"),ms.prototype),Object(Ce.a)(ms.prototype,"removeQuestionById",[je.d],Object.getOwnPropertyDescriptor(ms.prototype,"removeQuestionById"),ms.prototype),ms),Rs=function(){function e(t){Object(l.a)(this,e),this.studentStore=t}return Object(c.a)(e,[{key:"loadAllCourses",value:function(){var e=this;be().then(function(t){console.log(t.data),e.studentStore.updateAllCourses(t.data)}).catch(function(t){console.log(t.response),e._checkAuth(t)})}},{key:"getName",value:function(){var e=Object(de.a)(ue.a.mark(function e(){var t=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",he.a.get(fe+"student/name").then(function(e){return e.data.name}).catch(function(e){return console.log(e),t._checkAuth(e),[]}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"loadAllQuestions",value:function(e){var t=this;(function(e){return he.a.get(fe+"student/courses/"+e+"/questions")})(e).then(function(e){console.log(e.data),t.studentStore.updateAllQuestions(e.data)}).catch(function(e){console.log(e.response),t._checkAuth(e)})}},{key:"loadAllPrevQuestions",value:function(e){var t=this;(function(e){return he.a.get(fe+"student/courses/"+e+"/prevquestions")})(e).then(function(e){console.log(e.data),t.studentStore.updateAllPrevQuestions(e.data)}).catch(function(e){console.log(e.response),t._checkAuth(e)})}},{key:"dropCourse",value:function(e){var t=this;(function(e){return he.a.delete(fe+"student/courses/"+e)})(e).then(this.studentStore.dropCourse(e)).catch(function(e){console.log(e.response),t._checkAuth(e)})}},{key:"postAnswer",value:function(){var e=Object(de.a)(ue.a.mark(function e(t,a){var n=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ye(t,a).then(function(e){return e.data}).catch(function(e){console.log(e.response),n._checkAuth(e)});case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"enrollCourse",value:function(){var e=Object(de.a)(ue.a.mark(function e(t){var a=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ge(t).then(function(e){return be().then(function(e){console.log(e.data),a.studentStore.updateAllCourses(e.data)}).catch(function(e){console.log(e.response),a._checkAuth(e)}),null}).catch(function(e){return console.log(e.response),a._checkAuth(e),e.response.data}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getLogoutStudent",value:function(){var e=Object(de.a)(ue.a.mark(function e(){var t=this;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:he.a.get(fe+"student/logout").catch(function(e){console.log(e.response),t._checkAuth(e)});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"_checkAuth",value:function(e){void 0!==e.response&&401===e.response.status&&window.location.replace("/login-student")}}]),e}(),Bs=a(5813),Us=Object(g.b)("store")(ws=Object(g.c)(ws=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={link:"student/questions",colorStyle:void 0,open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleDelete=function(){a.apiStudentService.dropCourse(a.props.id),a.handleClose()},a.store=e.store,a.apiStudentService=new Rs(a.store),a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=[this.styles.orangeCard,this.styles.greenCard,this.styles.yellowCard,this.styles.navyCard];this.setState({colorStyle:e[this.props.colorIndex]})}},{key:"render",value:function(){return s.a.createElement(Te.a,{className:this.state.colorStyle},s.a.createElement(Pe.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",spacing:24},s.a.createElement(N.a,{item:!0,xs:10},s.a.createElement(Bs.a,{className:this.styles.link,to:{pathname:"/student/questions",state:{course_id:this.props.id}}},s.a.createElement(M.a,{className:this.styles.typography,variant:"h4"},this.props.course.dept," ",this.props.course.num," - ",this.props.course.title,": ",this.props.course.term," ",this.props.course.year))),s.a.createElement(N.a,{item:!0,xs:2},s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end"},s.a.createElement(ze.a,{title:"Drop Course",disableFocusListener:!0,placement:"top-start"},s.a.createElement(Ne.a,{variant:"text",size:"small",onClick:this.handleOpen},s.a.createElement(Wt.a,{className:this.styles.icon,color:"secondary"},"delete"))))),s.a.createElement(zt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},'Are you sure you want to delete "'+this.props.name+'"?'),s.a.createElement($t.a,null,s.a.createElement(Jt.a,{id:"alert-dialog-description"},"Doing so will remove this course and all of its data permanently.")),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,autoFocus:!0,color:"secondary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleDelete,color:"secondary"},"yes"))))))}}]),t}(s.a.Component))||ws)||ws,zs=Object(y.withStyles)(function(e){return{yellowCard:{margin:e.spacing.unit,width:"98%",background:e.palette.primary.main},navyCard:{margin:e.spacing.unit,width:"98%",background:e.palette.secondary.light},greenCard:{margin:e.spacing.unit,width:"98%",background:e.palette.primary.light},orangeCard:{margin:e.spacing.unit,width:"98%",background:e.palette.primary.dark},link:{width:"98%",textDecoration:"none"},icon:{margin:e.spacing.unit},typography:{width:"100%"}}})(Us),Ys=a(149),Hs=a.n(Ys),Gs=Object(g.b)("store")(Ss=Object(g.c)(Ss=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={logout:!1},a.handleLogout=function(){a.apiStudentService.getLogoutStudent(),a.setState({logout:!0})},a.store=a.props.store,a.apiStudentService=new Rs(a.store),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.logout?s.a.createElement(se.a,{to:"/",push:!0}):s.a.createElement(Ne.a,{onClick:this.handleLogout},"logout")}}]),t}(s.a.Component))||Ss)||Ss,$s=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(X.a,{position:"static",color:"primary"},s.a.createElement(te.a,null,s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},s.a.createElement(N.a,{item:!0},s.a.createElement(Bs.a,{to:"/student"},s.a.createElement("img",{src:Hs.a,alt:"logo",width:"100"}))),s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",alignItems:"right"},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.props.userName," "),s.a.createElement(Gs,null)))))))}}]),t}(s.a.Component),Zs=a(264),Js=a.n(Zs),Ks=Object(g.b)("store")(_s=Object(g.c)(_s=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={message:"Enter Course Enrollment Code:",open:!1,code:"",disabled:!0,errorMsg:null},a.handleChange=function(e){var t;e.target.value.length>0?a.setState((t={},Object(b.a)(t,e.target.name,e.target.value.toUpperCase()),Object(b.a)(t,"disabled",!1),t)):a.setState(Object(b.a)({disabled:!0},e.target.name,e.target.value.toUpperCase()))},a.handleOpen=function(){a.setState({message:"Enter Course Enrollment Code:",open:!0,code:"",disabled:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.enroll(),"Enter Course Enrollment Code:"===a.state.message&&(a.apiStudentService.loadAllCourses(),a.handleClose())},a.styles=e.classes,a.store=e.store,a.apiStudentService=new Rs(a.store),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"enroll",value:function(){var e=this;this.apiStudentService.enrollCourse(this.state.code).then(function(t){null!==t?e.setState(function(){return{message:t.error,disabled:!0,open:!0}}):e.setState(function(){return{open:!1}})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(Js.a,{color:"secondary","aria-label":"Add",className:this.styles.button,onClick:this.handleOpen},s.a.createElement(Wt.a,{className:this.styles.icon},"add")),s.a.createElement(zt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(Xt.a,{id:"alert-dialog-title"},this.state.message),s.a.createElement($t.a,null,s.a.createElement(it.a,{id:"title",helperText:"Enter code",name:"code",value:this.state.code,onChange:function(t){return e.handleChange(t)},fullWidth:!0})),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,color:"secondary"},"cancel"),s.a.createElement(Ne.a,{onClick:this.handleSubmit,disabled:this.state.disabled,color:"secondary"},"enroll"))))}}]),t}(s.a.Component))||_s)||_s,Xs=Object(y.withStyles)(function(e){return{button:{color:e.palette.secondary.main,marginRight:2*e.spacing.unit},icon:{margin:e.spacing.unit,color:"white"}}})(Ks),er=function(){function e(t){var a=this;Object(l.a)(this,e),this.store=t,this.socket=Na()(me),this.timeout=null,t.setSocketIOStatus(!0),setTimeout(function(){a.checkConnection()},1e3)}return Object(c.a)(e,[{key:"reset",value:function(){this.store.resetQuestions()}},{key:"subscribe",value:function(e){this.socket.emit("subscribe student",e)}},{key:"detectOpenQuestion",value:function(){var e=this;this.socket.on("question opened",function(t){e.store.addOneQuestion(t.question)})}},{key:"detectCloseQuestion",value:function(){var e=this;this.socket.on("question closed",function(t){e.store.updateLastQuestion(t.question),e.store.removeQuestionById(t.question.id)})}},{key:"listen",value:function(){this.socket.on("server message",function(e){console.log("Received message: "+e)})}},{key:"getAllQuestions",value:function(){var e=this;return this.socket.on("all open questions",function(t){e.store.updateAllQuestions(t.questions),console.log(t)})}},{key:"startCheckingConnection",value:function(){var e=this;this.timeout=setInterval(function(){e.checkConnection()},1e3)}},{key:"stopCheckingConnection",value:function(){clearTimeout(this.timeout)}},{key:"checkConnection",value:function(){this.socket.connected?this.store.setSocketIOStatus(!0):this.store.setSocketIOStatus(!1)}}]),e}(),tr=Object(g.b)("store")(Os=Object(g.c)(Os=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={course_ids:[],userName:"",showArchive:!1},a.store=e.store,a.apiStudentService=new Rs(a.store),a.styles=e.classes,a.socketIOStudentService=new er(a.store),a.handleToggleArchive=a.handleToggleArchive.bind(Object(ca.a)(Object(ca.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.apiStudentService.getName().then(function(t){e.setState({userName:t})})}},{key:"componentWillReceiveProps",value:function(){this.apiStudentService.loadAllCourses()}},{key:"handleToggleArchive",value:function(){this.setState(function(e){return Object(aa.a)({},e,{showArchive:!e.showArchive})})}},{key:"render",value:function(){var e=this.store.courses.filter(function(e){return e.is_current}),t=this.store.courses.filter(function(e){return!e.is_current}),a=this.state.showArchive?"":"Show";return s.a.createElement(N.a,{container:!0,direction:"column",spacing:Number("16")},s.a.createElement($s,{userName:this.state.userName}),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",className:this.styles.gridContainer},s.a.createElement(N.a,{item:!0,xs:12,sm:10},s.a.createElement(M.a,{variant:"h2",color:"secondary",className:this.styles.typeography}," My Classes ")),s.a.createElement(N.a,{item:!0,container:!0,justify:"flex-end",xs:12,sm:2},s.a.createElement(Xs,null))),s.a.createElement(N.a,{container:!0,justify:"center",alignItems:"flex-end"},e.map(function(e,t){var a=t%4;return s.a.createElement(zs,{key:t,course:e,id:e.id,colorIndex:a})})))),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"row",alignItems:"flex-start",justify:"space-between",className:this.styles.gridContainer},s.a.createElement(N.a,{item:!0,xs:12,sm:10},s.a.createElement(M.a,{variant:"h2",color:"secondary",className:this.styles.typeography}," ",a," Archived Courses ")),s.a.createElement(N.a,{item:!0,container:!0,justify:"flex-end",xs:12,sm:2},s.a.createElement($.a,{color:"secondary",onClick:this.handleToggleArchive},this.state.showArchive?s.a.createElement(B.a,null):s.a.createElement(z.a,null)))),s.a.createElement(W.a,{in:this.state.showArchive,timeout:"auto",unmountOnExit:!0},s.a.createElement(N.a,{container:!0,justify:"center",alignItems:"flex-end"},t.map(function(e,t){var a=t%4;return s.a.createElement(zs,{key:t,course:e,id:e.id,colorIndex:a})}))))))}}]),t}(n.Component))||Os)||Os,ar=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},gridItem:{padding:e.spacing.unit},paper:{padding:2*e.spacing.unit}}})(tr),nr=a(94),sr=a.n(nr),rr=a(137);function ir(e){return s.a.createElement(sr.a,Object.assign({direction:"up"},e))}var or,lr=Object(g.b)("store")(Cs=Object(g.c)(Cs=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={answer:"",sent:"",disabled:!1,dialogue:!1,time:0,isOn:!1},a.handleSubmit=function(){a.apiStudentService.postAnswer(a.state.answer,a.question.id),a.setState({sent:a.state.answer,disabled:!0})},a.handleClick=function(e){""===a.state.sent?a.handleSubmit():a.state.sent!==a.state.answer&&a.setState({dialogue:!0})},a.handleChange=function(e){e.target.value===a.state.sent?a.setState({disabled:!0}):a.setState({disabled:!1}),a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleClose=function(){a.setState({dialogue:!1})},a.handleCloseSubmit=function(){a.setState({dialogue:!1}),a.handleSubmit()},a.store=a.props.store,a.styles=e.classes,a.apiStudentService=new Rs(a.store),a.question=a.store.getQuestionWithId(a.props.questionId),a.startTimer=a.startTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.stopTimer=a.stopTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.resetTimer=a.resetTimer.bind(Object(ca.a)(Object(ca.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"startTimer",value:function(){var e=this;this.setState({isOn:!0}),this.timer=setInterval(function(){return e.setState({time:Date.now()-new Date(e.question.opened_at)})},1)}},{key:"stopTimer",value:function(){this.setState({isOn:!1}),clearInterval(this.timer)}},{key:"resetTimer",value:function(){this.setState({isOn:!1})}},{key:"componentDidMount",value:function(){this.state.isOn?0!==this.state.time&&this.state.isOn&&(this.stopTimer(),this.resetTimer()):this.startTimer()}},{key:"componentWillUnmount",value:function(){this.store.updateLastAnswer(this.state.sent),this.stopTimer(),this.resetTimer()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column",className:this.styles.gridContainer},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.question.question_title," "),s.a.createElement(M.a,{variant:"subtitle2",color:"secondary"},s.a.createElement($a.a,{className:this.styles.icon})," Open for ",this.state.time<1e3?"0s":rr(this.state.time,{secDecimalDigits:0})),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(it.a,{id:"full-width",helperText:"Enter Response",name:"answer",value:this.state.answer,onChange:function(t){return e.handleChange(t)},fullWidth:!0}))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end",className:this.styles.buttonContainer},s.a.createElement(Ne.a,{onClick:this.handleClick,disabled:this.state.disabled,variant:"contained",color:"secondary"},"Submit"),s.a.createElement(zt.a,{open:this.state.dialogue,TransitionComponent:ir,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},s.a.createElement(Xt.a,{id:"alert-dialog-slide-title"},"Answer changed- "),s.a.createElement($t.a,null,s.a.createElement(Jt.a,{id:"alert-dialog-slide-description"},'"Are you sure you want to change your answer from ',this.state.sent," to ",this.state.answer,'?"')),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleCloseSubmit,color:"primary"},"yes"))))))}}]),t}(n.Component))||Cs)||Cs,cr=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},gridItem:{paddingRight:2*e.spacing.unit},buttonContainer:{padding:1.5*e.spacing.unit},paper:{padding:e.spacing.unit},icon:{fontSize:12}}})(lr),ur=a(137);function dr(e){return s.a.createElement(sr.a,Object.assign({direction:"up"},e))}var pr,hr=Object(g.b)("store")(or=Object(g.c)(or=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={answerchoices:[],answer:"",sent:"",dialogue:!1,disabled:!1,time:0,isOn:!1},a.handleChange=function(e){a.setState({answer:e.target.value}),e.target.value===a.state.sent?a.setState({disabled:!0}):a.setState({disabled:!1})},a.handleSubmit=function(){a.apiStudentService.postAnswer((a.state.answerchoices.indexOf(a.state.answer)+1).toString(),a.props.questionId),a.setState({sent:a.state.answer,disabled:!0})},a.handleClick=function(){""===a.state.sent?a.handleSubmit():a.state.sent!==a.state.answer&&a.setState({dialogue:!0})},a.handleClose=function(){a.setState({dialogue:!1,answer:a.state.sent,disabled:!0})},a.handleCloseSubmit=function(){a.setState({dialogue:!1}),a.handleSubmit()},a.store=a.props.store,a.styles=e.classes,a.apiStudentService=new Rs(a.store),a.question=a.store.getQuestionWithId(a.props.questionId),a.startTimer=a.startTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.stopTimer=a.stopTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.resetTimer=a.resetTimer.bind(Object(ca.a)(Object(ca.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"startTimer",value:function(){var e=this;this.setState({isOn:!0}),this.timer=setInterval(function(){return e.setState({time:Date.now()-new Date(e.question.opened_at)})},1)}},{key:"stopTimer",value:function(){this.setState({isOn:!1}),clearInterval(this.timer)}},{key:"resetTimer",value:function(){this.setState({isOn:!1})}},{key:"componentDidMount",value:function(){for(var e=[],t=1;t<=this.question.number_of_options;t++){var a=this.question["option"+t.toString()];e.push(a)}this.setState({answerchoices:e}),this.state.isOn?0!==this.state.time&&this.state.isOn&&(this.stopTimer(),this.resetTimer()):this.startTimer()}},{key:"componentWillUnmount",value:function(){this.store.updateLastAnswer(this.state.answerchoices.indexOf(this.state.sent)+1),this.stopTimer(),this.resetTimer()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column",className:this.styles.gridContainer},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.question.question_title," "),s.a.createElement(M.a,{variant:"subtitle2",color:"secondary"},s.a.createElement($a.a,{className:this.styles.icon})," Open for ",this.state.time<1e3?"0s":ur(this.state.time,{secDecimalDigits:0})),s.a.createElement($e.a,{component:"fieldset"},s.a.createElement(Gn.a,{name:"answers",value:this.state.answer,onChange:this.handleChange},this.state.answerchoices.map(function(t,a){return s.a.createElement(Pt.a,{value:t,key:t,control:s.a.createElement(Yn.a,null),label:t,className:e.styles.answerOption})})))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end",className:this.styles.buttonContainer},s.a.createElement(Ne.a,{onClick:this.handleClick,disabled:this.state.disabled,value:this.state.answer,variant:"contained",color:"secondary"},"Submit"),s.a.createElement(zt.a,{open:this.state.dialogue,TransitionComponent:dr,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},s.a.createElement(Xt.a,{id:"alert-dialog-slide-title"},"Answer changed- "),s.a.createElement($t.a,null,s.a.createElement(Jt.a,{id:"alert-dialog-slide-description"},'"Are you sure you want to change your answer from ',this.state.sent," to ",this.state.answer,'?"')),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleCloseSubmit,color:"primary"},"yes"))))))}}]),t}(n.Component))||or)||or,mr=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},buttonContainer:{padding:1.5*e.spacing.unit},answerOption:{marginLeft:.3*e.spacing.unit},paper:{padding:e.spacing.unit},icon:{fontSize:12}}})(hr),fr=a(137);function br(e){return s.a.createElement(sr.a,Object.assign({direction:"up"},e))}var gr,yr,vr,Er,wr,Sr=Object(g.b)("store")(pr=Object(g.c)(pr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={answer:50,sent:"",disabled:!1,dialogue:!1,time:0,isOn:!1},a.handleSubmit=function(){a.apiStudentService.postAnswer(a.state.answer.toString(),a.question.id),a.setState({sent:a.state.answer,disabled:!0})},a.handleClick=function(e){""===a.state.sent?a.handleSubmit():a.state.sent!==a.state.answer&&a.setState({dialogue:!0})},a.handleSliderChange=function(e,t){t===a.state.sent?a.setState({disabled:!0}):a.setState({disabled:!1}),a.setState({answer:t})},a.handleClose=function(){a.setState({dialogue:!1})},a.handleCloseSubmit=function(){a.setState({dialogue:!1}),a.handleSubmit()},a.store=a.props.store,a.styles=e.classes,a.apiStudentService=new Rs(a.store),a.question=a.store.getQuestionWithId(a.props.questionId),a.startTimer=a.startTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.stopTimer=a.stopTimer.bind(Object(ca.a)(Object(ca.a)(a))),a.resetTimer=a.resetTimer.bind(Object(ca.a)(Object(ca.a)(a))),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"startTimer",value:function(){var e=this;this.setState({isOn:!0}),this.timer=setInterval(function(){return e.setState({time:Date.now()-new Date(e.question.opened_at)})},1)}},{key:"stopTimer",value:function(){this.setState({isOn:!1}),clearInterval(this.timer)}},{key:"resetTimer",value:function(){this.setState({isOn:!1})}},{key:"componentDidMount",value:function(){this.state.isOn?0!==this.state.time&&this.state.isOn&&(this.stopTimer(),this.resetTimer()):this.startTimer()}},{key:"componentWillUnmount",value:function(){this.store.updateLastAnswer(this.state.sent),this.stopTimer(),this.resetTimer()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column",justify:"space-between",className:this.styles.gridContainer},s.a.createElement(N.a,{item:!0},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-start",spacing:24},s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement("div",{className:this.styles.titleWrap}," ",this.question.question_title," "),s.a.createElement(M.a,{variant:"subtitle2",color:"secondary"},s.a.createElement($a.a,{className:this.styles.icon})," Open for ",this.state.time<1e3?"0s":fr(this.state.time,{secDecimalDigits:0}))),s.a.createElement(N.a,{item:!0,xs:4},s.a.createElement(N.a,{container:!0,justify:"flex-end",direction:"row",className:this.styles.percentContainer},s.a.createElement(Te.a,{className:this.styles.card},s.a.createElement(M.a,{align:"center",className:this.styles.whiteTypography},this.state.answer.toString()+" ","%")))))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:24,className:this.styles.gridItem},s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement(N.a,{container:!0,justify:"center"},s.a.createElement("div",{className:this.styles.labels},this.question.lower_label))),s.a.createElement(N.a,{item:!0,xs:6},s.a.createElement(Qs.a,{value:this.state.answer,min:0,max:100,step:1,"aria-labelledby":"label",onChange:this.handleSliderChange})),s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement(N.a,{container:!0,justify:"center"},s.a.createElement("div",{className:this.styles.labels},this.question.upper_label))))),s.a.createElement(N.a,{container:!0,direction:"row",justify:"flex-end",className:this.styles.buttonContainer},s.a.createElement(N.a,{item:!0},s.a.createElement(Ne.a,{onClick:this.handleClick,disabled:this.state.disabled,variant:"contained",color:"secondary"},"Submit")))),s.a.createElement(zt.a,{open:this.state.dialogue,TransitionComponent:br,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},s.a.createElement(Xt.a,{id:"alert-dialog-slide-title"},"Answer changed- "),s.a.createElement($t.a,null,s.a.createElement(Jt.a,{id:"alert-dialog-slide-description"},'"Are you sure you want to change your answer from ',this.state.sent," to ",this.state.answer,'?"')),s.a.createElement(Ht.a,null,s.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary"},"no"),s.a.createElement(Ne.a,{onClick:this.handleCloseSubmit,color:"primary"},"yes"))))}}]),t}(n.Component))||pr)||pr,_r=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},gridItem:{paddingTop:3*e.spacing.unit,paddingBottom:3*e.spacing.unit,paddingRight:1.5*e.spacing.unit},buttonContainer:{padding:1.5*e.spacing.unit,width:"100%"},percentContainer:{paddingRight:3*e.spacing.unit},labels:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"1em",display:"flex",justifyContent:"center"},titleWrap:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"1.5em",display:"flex",color:e.palette.secondary.main},card:{backgroundColor:e.palette.secondary.main,padding:.25*e.spacing.unit,width:45},whiteTypography:{color:"white"},paper:{padding:e.spacing.unit},icon:{fontSize:12}}})(Sr),Or=Object(g.b)("store")(gr=Object(g.c)(gr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).store=e.store,a.styles=e.classes,a.apiStudentService=new Rs(a.store),a.question=null,a.answer=null,a.answerchoices=[],a.correct=null,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;this.props.isLast?(this.question=this.store.lastQuestion,this.answer=this.store.lastAnswer):(this.question=this.store.getPrevQuestionWithId(this.props.questionId),this.answer=this.question.answer);for(var t=[],a=1;a<=this.question.number_of_options;a++){var n=this.question["option"+a.toString()];t.push(n)}this.answerchoices=t;var r=this.question.correct_answer;return void 0!==r&&(this.correct=null!==r&&""!==r?Number(r)-1:null),s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column",className:this.styles.gridContainer},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.question.question_title," "),s.a.createElement($e.a,{component:"fieldset"},s.a.createElement(Gn.a,{name:"answers"},this.answerchoices.map(function(t,a){var n;return void 0===e.correct||null===e.correct?n=e.styles.neutralAnswer:a===e.correct?n=e.styles.correctAnswer:parseInt(e.answer,10)-1===a&&(n=e.styles.wrongAnswer),s.a.createElement(Pt.a,{value:t,key:t,control:s.a.createElement(Yn.a,{disabled:!0,checked:a===parseInt(e.answer)-1}),label:t,className:n})}))))))}}]),t}(n.Component))||gr)||gr,Cr=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},buttonContainer:{padding:1.5*e.spacing.unit},correctAnswer:{backgroundColor:e.palette.primary.light,marginLeft:.3*e.spacing.unit},wrongAnswer:{backgroundColor:e.palette.primary.dark,marginLeft:.3*e.spacing.unit},neutralAnswer:{marginLeft:.3*e.spacing.unit},paper:{padding:e.spacing.unit}}})(Or),jr=Object(g.b)("store")(yr=Object(g.c)(yr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).store=e.store,a.styles=e.classes,a.apiStudentService=new Rs(a.store),a.question=null,a.answer="",a.correct=null,a.helperText="",a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){this.props.isLast?(this.question=this.store.lastQuestion,null!==this.store.lastAnswer&&(this.answer=this.store.lastAnswer)):(this.question=this.store.getPrevQuestionWithId(this.props.questionId),null!==this.question.answer&&(this.answer=this.question.answer));var e,t=this.question.correct_answer;return void 0!==t&&(this.correct=t,""===t||null===t?this.helperText="Your Answer: ":this.answer===t?this.helperText="Correct":this.helperText="Correct Answer: "+t),e=this.correct&&""!==this.correct?this.answer===this.correct?this.styles.correctAnswer:this.styles.wrongAnswer:this.styles.neutralAnswer,s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column",className:this.styles.gridContainer},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.question.question_title," "),s.a.createElement(N.a,{item:!0,className:this.styles.gridItem},s.a.createElement(it.a,{id:"full-width",helperText:this.helperText,name:"answer",value:this.answer,fullWidth:!0,disabled:!0,className:e})))))}}]),t}(n.Component))||yr)||yr,kr=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},gridItem:{paddingRight:2*e.spacing.unit},buttonContainer:{padding:1.5*e.spacing.unit},correctAnswer:{backgroundColor:e.palette.primary.light},wrongAnswer:{backgroundColor:e.palette.primary.dark},neutralAnswer:{},paper:{padding:e.spacing.unit}}})(jr),Ir=Object(g.b)("store")(vr=Object(g.c)(vr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).store=e.store,a.styles=e.classes,a.apiStudentService=new Rs(a.store),a.question=null,a.answer=-1,a.helperText="",a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"operatorToComparison",value:function(e,t,a){var n=!1;switch(t){case"<":n=e<a;break;case"<=":n=e<=a;break;case">":n=e>a;break;case">=":n=e>=a;break;default:n=e===a}return n}},{key:"checkAnswer",value:function(e,t){if(null===e||""===e)return!0;var a=e.split(" ");if(2===a.length)return this.operatorToComparison(Number(t),a[0],Number(a[1]));var n=this.operatorToComparison(Number(t),a[0],Number(a[1])),s=this.operatorToComparison(Number(t),a[3],Number(a[4]));return"&&"===a[2]?n&&s:n||s}},{key:"operatorToWord",value:function(e){var t="equals";switch(e){case"<":t="<";break;case"<=":t="\u2264";break;case">":t=">";break;case">=":t="\u2265";break;case"||":t="or";break;case"&&":t="and";break;default:t="="}return t}},{key:"getAnswerText",value:function(e){if(null===e)return"";var t=e.split(" ");return 2===t.length?"answer "+this.operatorToWord(t[0])+" "+t[1]+"%":"answer "+this.operatorToWord(t[0])+" "+t[1]+"% "+this.operatorToWord(t[2])+" "+this.operatorToWord(t[3])+" "+t[4]+"%"}},{key:"render",value:function(){var e;return this.props.isLast?(this.question=this.store.lastQuestion,null!==this.store.lastAnswer&&(this.answer=Number(this.store.lastAnswer))):(this.question=this.store.getPrevQuestionWithId(this.props.questionId),null!==this.question.answer&&(this.answer=Number(this.question.answer))),e=this.checkAnswer(this.question.correct_answer,this.answer)?""!==this.question.correct_answer&&null!==this.question.correct_answer?this.styles.correctAnswer:this.styles.neutralAnswer:this.styles.wrongAnswer,""===this.question.correct_answer||null===this.question.correct_answer?this.helperText="Your Answer: "+this.answer.toString()+"%":this.helperText="Correct Answer: "+this.getAnswerText(this.question.correct_answer),s.a.createElement("div",null,s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(N.a,{container:!0,direction:"column",justify:"center",className:this.styles.gridContainer},s.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-start",spacing:16,className:this.styles.titleContainer},s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement("div",{className:this.styles.titleWrap}," ",this.question.question_title," ")),s.a.createElement(N.a,{item:!0,xs:4},s.a.createElement(N.a,{container:!0,justify:"flex-end",direction:"row",className:this.styles.percentContainer},s.a.createElement(Te.a,{className:this.styles.card},s.a.createElement(M.a,{align:"center",className:this.styles.whiteTypography},this.answer.toString()+" ","%"))))),s.a.createElement(N.a,{container:!0,direction:"column",className:this.styles.gridItem},s.a.createElement(N.a,{container:!0,direction:"column",justify:"space-evenly",className:e},s.a.createElement(N.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:24},s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement(N.a,{container:!0,justify:"center"},s.a.createElement("div",{className:this.styles.labels},this.question.lower_label))),s.a.createElement(N.a,{item:!0,xs:6},s.a.createElement(Qs.a,{disabled:!0,value:this.answer,min:0,max:100,step:1,"aria-labelledby":"label"})),s.a.createElement(N.a,{item:!0,xs:!0},s.a.createElement(N.a,{container:!0,justify:"center"},s.a.createElement("div",{className:this.styles.labels},this.question.upper_label)))),s.a.createElement(N.a,{container:!0,direction:"row"},s.a.createElement(it.a,{id:"correctAnswer",helperText:this.helperText,fullWidth:!0,disabled:!0})))))))}}]),t}(n.Component))||vr)||vr,qr=Object(y.withStyles)(function(e){return{gridContainer:{margin:e.spacing.unit},labels:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"1em",display:"flex",justifyContent:"center",color:"#424242"},titleContainer:{paddingBottom:.25*e.spacing.unit},percentContainer:{paddingRight:3*e.spacing.unit},titleWrap:{wordBreak:"break-word",fontFamily:"sans-serif",fontSize:"1.5em",display:"flex",color:e.palette.secondary.main},card:{backgroundColor:"gray",padding:.25*e.spacing.unit,width:45},gridItem:{width:"98%"},paper:{padding:e.spacing.unit},correctAnswer:{backgroundColor:e.palette.primary.light,paddingTop:2*e.spacing.unit},wrongAnswer:{backgroundColor:e.palette.primary.dark,paddingTop:2*e.spacing.unit},neutralAnswer:{paddingTop:2*e.spacing.unit},textField:{fontSize:50}}})(Ir),xr=Object(g.b)("store")(Er=Object(g.c)(Er=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={show_previous_questions:!1,show_last_question:!0,dots:""},a.handleClick=function(){var e=a.props.location.state.course_id;a.state.show_previous_questions?a.setState({show_previous_questions:!1,show_last_question:!0}):(a.apiStudentService.loadAllPrevQuestions(e),a.setState({show_previous_questions:!0,show_last_question:!1}))},a.styles=e.classes,a.store=a.props.store,a.apiStudentService=new Rs(a.store),a.socketIOStudentService=new er(a.store),a.timeout=null,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socketIOStudentService.reset();var t=this.props.location.state.course_id;this.socketIOStudentService.subscribe(t),this.socketIOStudentService.detectOpenQuestion(),this.socketIOStudentService.detectCloseQuestion(),this.socketIOStudentService.getAllQuestions(),this.socketIOStudentService.listen(),this.socketIOStudentService.startCheckingConnection(),this.timeout=setInterval(function(){var t=e.state.dots;"..."===t?t="":t+=".",e.setState({dots:t})},1e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.socketIOStudentService.stopCheckingConnection()}},{key:"render",value:function(){var e=this;return s.a.createElement(N.a,{container:!0,direction:"column",spacing:Number("16")},s.a.createElement($s,null),s.a.createElement(N.a,{className:this.styles.gridContainer},s.a.createElement(_a.a,{className:this.styles.paper,style:{backgroundColor:"secondary"}},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.store.socketIOStatus?(0!==this.store.getNumberOfQuestions()?"Open Questions":"No Open Questions")+this.state.dots:"Connection lost!"," "),0!==this.store.getNumberOfQuestions()?s.a.createElement(N.a,null,this.store.questions.map(function(t){return"free_text"===t.question_type?s.a.createElement(N.a,{item:!0,className:e.styles.gridItem,key:t.id},s.a.createElement(cr,{questionId:t.id})):"slider"===t.question_type?s.a.createElement(N.a,{item:!0,className:e.styles.gridItem,key:t.id},s.a.createElement(_r,{questionId:t.id})):s.a.createElement(N.a,{item:!0,className:e.styles.gridItem,key:t.id},s.a.createElement(mr,{questionId:t.id}))})):null)),s.a.createElement(N.a,{className:this.styles.gridContainer},s.a.createElement(_a.a,{className:this.styles.paper},s.a.createElement(M.a,{variant:"h5",color:"secondary"}," ",this.state.show_last_question&&null!==this.store.lastQuestion?"Recently Closed":"Previous Questions"," "),this.state.show_last_question?s.a.createElement(N.a,{className:this.styles.gridContainer},null!==this.store.lastQuestion?"multiple_choice"===this.store.lastQuestion.question_type?s.a.createElement(Cr,{isLast:!0}):"free_text"===this.store.lastQuestion.question_type?s.a.createElement(kr,{isLast:!0}):s.a.createElement(qr,{isLast:!0}):null):null,s.a.createElement(N.a,{className:this.styles.gridContainer},s.a.createElement(Ne.a,{onClick:this.handleClick,variant:"outlined",color:"secondary"},this.state.show_previous_questions?"Hide Previous Questions":"Show All Previous Questions")),s.a.createElement(N.a,null,this.state.show_previous_questions?this.store.prevQuestions.length>0?this.store.prevQuestions.map(function(t){return"free_text"===t.question_type?s.a.createElement(N.a,{item:!0,className:e.styles.gridItem,key:t.id},s.a.createElement(kr,{questionId:t.id})):"multiple_choice"===t.question_type?s.a.createElement(N.a,{item:!0,className:e.styles.gridItem,key:t.id},s.a.createElement(Cr,{questionId:t.id})):s.a.createElement(N.a,{item:!0,className:e.styles.gridItem,key:t.id},s.a.createElement(qr,{questionId:t.id}))}):s.a.createElement(M.a,{color:"secondary"}," There are no previous questions "):null))))}}]),t}(n.Component))||Er)||Er,Qr=Object(y.withStyles)(function(e){return{gridContainer:{padding:e.spacing.unit},gridItem:{padding:e.spacing.unit},paper:{padding:e.spacing.unit}}})(xr),Lr=Object(g.b)("store")(wr=Object(g.c)(wr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={course_id:""},a.store=a.props.store,a.apiStudentService=new Rs(a.store),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state.course_id;this.apiStudentService.loadAllQuestions(e),this.setState({course_id:this.props.location.state})}},{key:"render",value:function(){return 0!==this.store.questions.length?s.a.createElement(N.a,{container:!0,direction:"column",spacing:Number("16")},s.a.createElement($s,null),s.a.createElement(N.a,{container:!0,direction:"column",justify:"center"},s.a.createElement(_a.a,{style:{padding:"2%"}},s.a.createElement(Ne.a,{size:"large",variant:"contained",color:"secondary",width:"100%"},s.a.createElement(Bs.a,{to:{pathname:"/student/questions",state:{course_id:this.state.course_id}},style:{color:"white","text-decoration":"none"}}," Open Questions "))))):s.a.createElement(N.a,{container:!0,direction:"column",spacing:Number("16")},s.a.createElement($s,null),s.a.createElement(N.a,{item:!0},s.a.createElement(_a.a,{style:{paddingTop:"1%",paddingBottom:"1%"}},s.a.createElement(M.a,{variant:"h5",color:"secondary",style:{width:"98%",paddingLeft:"1%",paddingRight:"1%"}}," There are no questions for this course at the moment... "))))}}]),t}(n.Component))||wr)||wr,Nr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).styles=e.classes,a.store=new Ws,a.apiStudentService=new Rs(a.store),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.apiStudentService.loadAllCourses()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(g.a,{store:this.store},s.a.createElement(m.a,null,s.a.createElement(f.a,{exact:!0,path:"/student",component:ar}),s.a.createElement(f.a,{path:"/student/checkquestions",component:Lr}),s.a.createElement(f.a,{path:"/student/questions",component:Qr}),s.a.createElement(f.a,{component:Vs}))))}}]),t}(s.a.Component),Dr=Object(y.withStyles)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},content:{marginLeft:240,flexGrow:1,padding:3*e.spacing.unit}}})(Nr),Tr=(a(5806),a(182)),Ar=a.n(Tr),Pr=a(265),Vr=a.n(Pr),Mr=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={toStudent:!1,toProf:!1},a.handleLoginProf=function(){a.setState({toProf:!0})},a.handleLoginStudent=function(){a.setState({toStudent:!0})},a.styles=e.classes,a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.toProf?s.a.createElement(se.a,{to:"/login-prof",push:!0}):this.state.toStudent?s.a.createElement(se.a,{to:"/login-student",push:!0}):s.a.createElement("div",{className:this.styles.root},s.a.createElement(N.a,{container:!0,spacing:24,justify:"center"},s.a.createElement(N.a,{item:!0,className:this.styles.clickGrid},s.a.createElement(Te.a,{className:this.styles.studentcard},s.a.createElement(Ar.a,{onClick:this.handleLoginStudent},s.a.createElement(Pe.a,null,s.a.createElement(N.a,{item:!0,container:!0,direction:"column",spacing:16},s.a.createElement(N.a,{item:!0,align:"center"},s.a.createElement("img",{src:Hs.a,alt:"logo",width:100})),s.a.createElement(N.a,{item:!0,align:"center"},s.a.createElement(M.a,{variant:"h2",gutterBottom:!0,className:this.styles.studentTypography},"STUDENT LOGIN"))))))),s.a.createElement(N.a,{item:!0,className:this.styles.clickGrid},s.a.createElement(Te.a,{className:this.styles.profcard},s.a.createElement(Ar.a,{onClick:this.handleLoginProf},s.a.createElement(Pe.a,null,s.a.createElement(N.a,{item:!0,container:!0,direction:"column",spacing:16},s.a.createElement(N.a,{item:!0,align:"center"},s.a.createElement("img",{src:P.a,alt:"logo",width:100})),s.a.createElement(N.a,{item:!0,align:"center"},s.a.createElement(M.a,{variant:"h2",gutterBottom:!0,className:this.styles.profTypography},"TEACHER LOGIN")))))))),s.a.createElement(X.a,{position:"fixed",color:"primary",className:this.styles.appBar},s.a.createElement(N.a,{container:!0,direction:"row",justify:"center"},s.a.createElement(M.a,{color:"inherit"},"Created by mecakir, zsyang, afeng, lheimes, and czye."))))}}]),t}(n.Component),Fr=Object(y.withStyles)(function(e){var t,a;return{studentTypography:{color:e.palette.secondary.main},profTypography:{color:e.palette.primary.main},root:{flexGrow:1,height:"100vh",width:"100vw",backgroundImage:"url("+Vr.a+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center"},appBar:{top:"auto",bottom:0},studentcard:(t={backgroundColor:e.palette.primary.main},Object(b.a)(t,e.breakpoints.up("xs"),{maxWidth:400}),Object(b.a)(t,e.breakpoints.down("xs"),{maxWidth:300}),t),profcard:(a={backgroundColor:e.palette.secondary.main},Object(b.a)(a,e.breakpoints.up("xs"),{maxWidth:400}),Object(b.a)(a,e.breakpoints.down("xs"),{maxWidth:300}),Object(b.a)(a,"marginBottom",16),a)}})(Mr),Wr=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e="student/login?service=",t="/student",a=14;window.location.href.split("login-")[1].valueOf()==="prof".valueOf()&&(e="professor/login?service=",t="/professor",a=11),window.location.replace(fe+e+window.location.href.substring(0,window.location.href.length-a)+t)}},{key:"render",value:function(){return s.a.createElement("div",null,"Logging In")}}]),t}(n.Component),Rr=Object(y.createMuiTheme)({palette:{primary:{main:"#E9C46A",dark:"#F4A261",light:"#2A9D8F"},secondary:{main:"#264653"},accent:{main:"#E76F51"},type:"light"},typography:{useNextVariants:!0}}),Br=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(y.MuiThemeProvider,{theme:Rr},s.a.createElement(h.a,null,s.a.createElement("div",null,s.a.createElement(m.a,null,s.a.createElement(f.a,{exact:!0,path:"/",component:Fr}),s.a.createElement(f.a,{exact:!0,path:"/login-(prof|student)",component:Wr}),s.a.createElement(f.a,{path:"/professor",component:Fs}),s.a.createElement(f.a,{path:"/student",component:Dr}),s.a.createElement(f.a,{component:Vs})))))}}]),t}(n.Component);Object(je.e)({enforceActions:"observed"}),i.a.render(s.a.createElement(Br,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5472,2,1]]]);
//# sourceMappingURL=main.6accc731.chunk.js.map